import{o as a,f as i,b as e,t as o,F as g,h as T,r as u,d as H,n as K,g as m,a as d,w as p,K as W,k as A,T as J,D as X,m as Y,u as f,Z as ee,O as D,B as te}from"./app-BSk1EDnN.js";import{_ as F}from"./Modal-Do-8ssZQ.js";import{Z as se}from"./index-CbjWbaYu.js";import{_ as L}from"./InputLabel-DUDy84yC.js";import{_ as N}from"./TextInput-Ct1VhByY.js";const le={class:"w-64 bg-white pb-6 z-10"},oe=e("div",{class:"flex justify-center"},[e("img",{src:"logo.jpg",class:"w-32",alt:""})],-1),ne={class:"grid grid-cols-2"},ae={class:"text-right"},ie={class:"grid grid-cols-2"},re=e("b",null,"Type",-1),de={class:"text-right"},ce=e("hr",{class:"border-black mt-2"},null,-1),ue=e("div",{class:"flex justify-between"},[e("p",null,"Item"),e("p",null,"Subtotal")],-1),he=e("hr",{class:"border-black mb-2"},null,-1),me={class:"flex justify-between pl-4 w-full"},fe={class:"w-full"},ve=e("hr",{class:"border-black my-2"},null,-1),be={class:"font-bold text-lg flex justify-between"},xe=e("p",null,"TOTAL",-1),pe={class:"pl-4"},ge=e("hr",{class:"border-black my-2"},null,-1),_e=e("div",{class:"flex justify-center"},[e("p",null,"Thank you. Come again.")],-1),we={class:"flex justify-between text-sm"},ye=e("p",null,"Cashier",-1),$e={class:"flex justify-between text-sm"},ke=e("p",null,"Order ID",-1),Ce={class:"text-right"},je={class:"flex justify-between text-sm"},De=e("p",{class:"w-max"},"Order Time",-1),Fe={class:"w-max"},Te=e("div",{class:"flex flex-col items-center justify-center text-sm mt-2 w-full"},[e("b",null,"UPTop Diner"),e("p",null,"25 L. Geirosa Ave., Brgy. Silangan"),e("p",null,"Calauan, Laguna"),e("p",null,"La Famiglia Building 2nd Floor")],-1),Se=e("hr",{class:"border-black my-2"},null,-1),Ie=e("p",null,"THIS IS NOT AN OFFICIAL RECEIPT",-1),Oe={__name:"Receipt",props:{receipt:{type:Object,required:!0}},setup(l){return(c,y)=>(a(),i("div",le,[oe,e("div",ne,[e("p",null,o(l.receipt.name??" "),1),e("p",ae,o(`Order #${l.receipt.number}`),1)]),e("div",ie,[re,e("b",de,o(l.receipt.type),1)]),ce,ue,he,e("div",null,[(a(!0),i(g,null,T(l.receipt.items,h=>(a(),i("div",null,[e("p",null,o(h.name),1),e("div",me,[e("p",fe,o(Number(h.price).amountFormat())+" x"+o(h.quantity),1),e("p",null,o((h.quantity*h.price).amountFormat()),1)])]))),256)),ve,e("div",null,[e("div",be,[xe,e("p",null,o(l.receipt.gross.amountFormat()),1)]),e("div",pe,[e("p",null,"CASH: "+o(Number(l.receipt.payment).amountFormat()),1),e("p",null,"CHANGE: "+o((l.receipt.payment-l.receipt.gross).amountFormat()),1)])]),ge,_e,e("div",we,[ye,e("p",null,o(c.$page.props.auth.user.name),1)]),e("div",$e,[ke,e("p",Ce,o(`dQw4w9WgXcQ${l.receipt.id.pad(4)}`),1)]),e("div",je,[De,e("p",Fe,o(Intl.DateTimeFormat("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"numeric",hour12:!0}).format(new Date(l.receipt.created_at))),1)]),Te,Se,Ie])]))}},ze={key:0,class:"overflow-hidden"},Ne={class:"flex justify-between text-sm"},M={__name:"ExpensesCard",props:{data:Object,title:String,total:Number},setup(l){const c=u(!1);return(y,h)=>(a(),i(g,null,[e("div",{onClick:h[0]||(h[0]=_=>c.value=!c.value),class:"flex justify-between"},[e("span",null,[H(o(l.title)+" ",1),l.data.length?(a(),i("i",{key:0,class:K(["bx bxs-chevron-down align-middle duration-300 ease-in-out",{"rotate-180":c.value}])},null,2)):m("",!0)]),e("b",null,o(Number(l.total).amountFormat()),1)]),d(W,{"enter-from-class":"max-h-0","enter-active-class":"duration-300 ease-in-out","enter-to-class":"max-h-screen","leave-from-class":"max-h-screen","leave-to-class":"max-h-0","leave-active-class":"duration-300 ease-in-out"},{default:p(()=>[c.value?(a(),i("div",ze,[(a(!0),i(g,null,T(l.data,_=>(a(),i("div",Ne,[e("span",null,o(_.item),1),e("span",null,o(_.amount),1)]))),256))])):m("",!0)]),_:1})],64))}},Ve=e("title",null,`
            Sales
        `,-1),Ee={class:"max-w-7xl mx-auto px-6 py-8 lg:px-8 z-50"},Ae={class:"flex justify-between items-center mb-4"},Le={key:0,class:"flex space-x-2 items-center"},Me={key:1,class:"dark:text-white"},He={key:0,class:"w-full rounded-lg dark:bg-zinc-800 bg-white dark:text-white p-4 flex flex-col relative"},Pe={key:0,class:"w-full lg:w-1/4"},Be={class:"flex justify-between"},Re=e("span",null,"Total orders:",-1),qe={class:"flex justify-between"},Ue=e("span",null,"Gross sales:",-1),Ge={class:"flex justify-between"},Qe=e("span",null,"Cost of goods sold:",-1),Ze={class:"flex justify-between"},Ke=e("span",null,"Income:",-1),We={class:"flex justify-between"},Je=e("span",null,"Net Income:",-1),Xe={key:1,class:"w-full lg:w-1/4"},Ye=e("b",null,"Inventory Expense",-1),et={class:"flex justify-between"},tt=e("span",null,"Cost of goods sold:",-1),st={class:"flex justify-end"},lt={class:"lg:absolute bottom-0 right-0 lg:p-4 mt-2 space-x-2 self-end"},ot=["disabled"],nt=["disabled"],at={key:1,class:"dark:text-white w-full bg-white dark:bg-zinc-800 text-left text-sm rounded-lg overflow-hidden mt-4"},it=e("th",{class:"p-4"},"Customer",-1),rt={class:"p-4"},dt=e("th",{class:"p-4"},"Order Type",-1),ct=e("th",{class:"p-4"},"Orders",-1),ut=e("th",{class:"p-4"},"Quantity",-1),ht=e("th",{class:"p-4"},"Gross Sales",-1),mt=e("th",{class:"p-4"},"Net Income",-1),ft=e("th",{class:"p-4"},"Actions",-1),vt={class:"bg-white dark:bg-zinc-800 border-b border-zinc-700"},bt={class:"px-4 py-2"},xt={class:"px-4 py-2"},pt={key:0,class:"text-xs opacity-70"},gt={class:"px-4 py-2"},_t={class:"px-4 py-2"},wt={class:"px-4 py-2"},yt={class:"px-4 py-2"},$t={class:"px-4 py-2"},kt={class:"px-4 py-2"},Ct={class:"flex space-x-2"},jt=["onClick"],Dt=["onClick"],Ft={class:"bg-white font-bold dark:bg-zinc-800"},Tt={class:"px-4 py-2"},St=e("td",{class:"px-4 py-2"},null,-1),It=e("td",{class:"px-4 py-2"},null,-1),Ot=e("td",{class:"px-4 py-2"},null,-1),zt=e("td",{class:"px-4 py-2"},null,-1),Nt={class:"px-4 py-2"},Vt={class:"px-4 py-2"},Et=e("td",{class:"px-4 py-2"},null,-1),At={key:2,class:"flex justify-center mt-14"},Lt=e("div",{class:"flex justify-center items-center flex-col text-zinc-700 dark:text-zinc-400"},[e("i",{class:"bx bx-ghost text-7xl"}),e("p",null,"Oohh... It's empty in here.")],-1),Mt=[Lt],Ht={class:"dark:text-white p-6"},Pt=e("p",{class:"font-bold"},"Confirmation",-1),Bt=e("p",{class:"mt-4"},"This transaction record will be deleted. Enter the code to continue.",-1),Rt={class:"flex justify-center mt-4 font-bold tracking-wider text-4xl"},qt={class:"dark:text-white p-4"},Ut=e("p",{class:"font-bold"},"Confirmation",-1),Gt=e("p",{class:"mt-4"},"Print this receipt?",-1),Qt={class:"mt-4 grid grid-cols-2 gap-2"},Zt={class:"dark:text-white p-4"},Kt={class:"flex flex-row-reverse gap-4 mt-8"},Wt={class:"dark:text-white p-4"},Jt={class:"flex flex-row-reverse mt-4 gap-4"},Xt={key:0,class:"fixed top-0 -left-96"},os={__name:"Sales",props:{transactions:Object,filters:Object,total:Object,batchDates:Object,expenses:Object},setup(l){const c=l,y=A(()=>c.expenses.net.reduce((n,t)=>n+Number(t.amount),0)),h=A(()=>c.expenses.cogs.reduce((n,t)=>n+Number(t.amount),0)),_=(n,t)=>{const s=Math.ceil(n),r=Math.floor(t);return Math.floor(Math.random()*(r-s+1)+s)},$=u(!1),V=u(null),S=u(""),I=u(null),P=n=>{V.value=n,S.value=_(1e5,999999),$.value=!0,te(()=>I.value.focus())},B=n=>{n==S.value&&D.delete(route("order.cancel",V.value.id),{onStart:()=>I.value.disabled=!0,onSuccess:()=>$.value=!1})},v=c.filters.date?new Date(c.filters.date):new Date,R=v<new Date(new Date().setHours(0,0,0,0)),O=n=>{let t=new Date(n);return Intl.DateTimeFormat("en-PH",{month:"long",day:"numeric",year:"numeric"}).format(t)},q=J({search:c.filters.search,date:c.filters.date}),b=u({from:"",to:""}),k=u(!1);X(q,n=>{D.get(route("sales"),n,{preserveState:!0,preserveScroll:!0,replace:!0})},{deep:!0});const U=r=>{var r=parseInt(r,10),t=Math.floor(r/3600),s=Math.floor((r-t*3600)/60),r=r-t*3600-s*60;return t?s?`${t}h ${s}m ${r}s`:`${t}h ${r}s`:s?`${s}m ${r}s`:`${r}s`},E=u(!1);Y(()=>{let n=navigator.userAgent.toLowerCase();E.value=n.indexOf("android")>-1});const w=u(!1),C=u(null),G=n=>{C.value=n,w.value=!0},Q=()=>{const n=document.getElementById("receipt");se(n,{quality:1,scale:2}).then(t=>{console.log(t),E.value&&(window.location.href="rawbt:"+t)}).finally(()=>{w.value=!1,C.value=null})},x=u(1),j=u(!1),z=u(null),Z=()=>{let n=new Date(z.value).toLocaleDateString("en-PH");console.log(n),D.get(route("sales"),{date:n})};return(n,t)=>(a(),i(g,null,[d(f(ee),null,{default:p(()=>[Ve]),_:1}),e("div",Ee,[e("div",Ae,[l.filters.advanced===void 0?(a(),i("div",Le,[e("i",{onClick:t[0]||(t[0]=s=>n.$inertia.get(n.route("sales"),{date:new Date(f(v).setDate(f(v).getDate()-1)).toLocaleDateString("en-PH")})),class:"bx bxs-chevron-left dark:text-white hover:bg-white hover:text-zinc-900 w-6 h-6 inline-flex justify-center items-center rounded-full border dark:border-white"}),e("p",{onClick:t[1]||(t[1]=s=>j.value=!0),class:"dark:text-white font-semibold cursor-pointer"},o(f(v).toWordFormat()),1),R?(a(),i("i",{key:0,onClick:t[2]||(t[2]=s=>n.$inertia.get(n.route("sales"),{date:new Date(f(v).setDate(f(v).getDate()+1)).toLocaleDateString("en-PH")})),class:"bx bxs-chevron-right dark:text-white hover:bg-white hover:text-zinc-900 w-6 h-6 inline-flex justify-center items-center rounded-full border dark:border-white"})):m("",!0)])):(a(),i("span",Me,o(`${O(l.batchDates.from)} to ${O(l.batchDates.to)}`),1)),e("button",{onClick:t[3]||(t[3]=s=>k.value=!0),class:"text-sm dark:text-white hover:underline hover:text-blue-500 duration-200 ease-in-out"},"Advanced filter")]),l.transactions.length?(a(),i("div",He,[x.value===1?(a(),i("div",Pe,[e("div",Be,[Re,e("b",null,o(l.transactions.length),1)]),e("div",qe,[Ue,e("b",null,o(l.total.gross.amountFormat()),1)]),e("div",Ge,[Qe,e("b",null,o(l.total.cost.amountFormat()),1)]),e("div",Ze,[Ke,e("b",null,o((l.total.gross-l.total.cost).amountFormat()),1)]),d(M,{title:"Expenses",data:l.expenses.net,total:y.value},null,8,["data","total"]),e("div",We,[Je,e("b",null,o((l.total.gross-l.total.cost-y.value).amountFormat()),1)])])):m("",!0),x.value===2?(a(),i("div",Xe,[Ye,e("div",et,[tt,e("b",null,o(l.total.cost.amountFormat()),1)]),d(M,{title:"Expenses",data:l.expenses.cogs,total:h.value},null,8,["data","total"]),e("div",st,[e("b",null,o((l.total.cost-h.value).amountFormat()),1)])])):m("",!0),e("div",lt,[e("button",{onClick:t[4]||(t[4]=s=>x.value-=1),disabled:x.value===1,class:"bx bxs-chevron-left dark:text-white enabled:hover:bg-white enabled:hover:text-zinc-900 w-6 h-6 inline-flex justify-center items-center rounded-full border dark:border-white disabled:opacity-20"},null,8,ot),e("button",{onClick:t[5]||(t[5]=s=>x.value+=1),disabled:x.value===2,class:"bx bxs-chevron-right dark:text-white enabled:hover:bg-white enabled:hover:text-zinc-900 w-6 h-6 inline-flex justify-center items-center rounded-full border dark:border-white disabled:opacity-20"},null,8,nt)])])):m("",!0),l.transactions.length?(a(),i("table",at,[e("thead",null,[e("tr",null,[it,e("th",rt,o(l.batchDates?"Date":"Time"),1),dt,ct,ut,ht,mt,ft])]),e("tbody",null,[(a(!0),i(g,null,T(l.transactions,s=>(a(),i("tr",vt,[e("td",bt,o(s.name??`#${s.number}`),1),e("td",xt,[H(o(l.batchDates?O(s.created_at):new Date(s.created_at).toTimeFormat())+" ",1),l.batchDates?m("",!0):(a(),i("span",pt,o(U(s.elapsed)),1))]),e("td",gt,o(s.type),1),e("td",_t,[e("div",null,[(a(!0),i(g,null,T(s.items,r=>(a(),i("p",null,o(`${r.name} x${r.quantity}`),1))),256))])]),e("td",wt,o(s.quantity),1),e("td",yt,o(s.gross.amountFormat()),1),e("td",$t,o((s.gross-s.cost).amountFormat()),1),e("td",kt,[e("div",Ct,[e("i",{onClick:r=>G(s),class:"bx bx-printer dark:text-white inline-flex justify-center items-center p-2 rounded-full bg-green-500 hover:bg-green-700 active:bg-green-900 duration-200 ease-in-out cursor-pointer"},null,8,jt),e("i",{onClick:r=>P(s),class:"bx bx-trash dark:text-white inline-flex justify-center items-center p-2 rounded-full bg-red-500 hover:bg-red-700 active:bg-red-900 duration-200 ease-in-out cursor-pointer"},null,8,Dt)])])]))),256)),e("tr",Ft,[e("td",Tt,o(l.transactions.length),1),St,It,Ot,zt,e("td",Nt,o(l.total.gross.amountFormat()),1),e("td",Vt,o((l.total.gross-l.total.cost).amountFormat()),1),Et])])])):(a(),i("div",At,Mt))]),d(F,{show:$.value,"max-width":"md",onClose:t[7]||(t[7]=s=>$.value=!1)},{default:p(()=>[e("div",Ht,[Pt,Bt,e("div",Rt,o(S.value),1),e("input",{ref_key:"codeInput",ref:I,onKeyup:t[6]||(t[6]=s=>B(s.target.value)),class:"bg-zinc-900 w-full rounded-lg mt-2 disabled:opacity-50",type:"text"},null,544)])]),_:1},8,["show"]),d(F,{show:w.value,onClose:t[9]||(t[9]=s=>w.value=!1)},{default:p(()=>[e("div",qt,[Ut,Gt,e("div",Qt,[e("button",{onClick:Q,class:"bg-green-500 rounded-lg py-2 hover:bg-green-600 active:bg-green-800 duration-200 ease-in-out"},"Yes"),e("button",{onClick:t[8]||(t[8]=s=>w.value=!1),class:"bg-zinc-500 rounded-lg py-2 hover:bg-zinc-600 active:bg-zinc-900 duration-200 ease-in-out"},"Cancel")])])]),_:1},8,["show"]),d(F,{show:k.value,onClose:t[14]||(t[14]=s=>k.value=!1),"max-width":"md",closeable:!1},{default:p(()=>[e("div",Zt,[d(L,{for:"from",value:"From"}),d(N,{type:"date",id:"from",modelValue:b.value.from,"onUpdate:modelValue":t[10]||(t[10]=s=>b.value.from=s),class:"w-full mt-2"},null,8,["modelValue"]),d(L,{class:"mt-4",for:"to",value:"To"}),d(N,{type:"date",id:"to",modelValue:b.value.to,"onUpdate:modelValue":t[11]||(t[11]=s=>b.value.to=s),class:"w-full mt-2"},null,8,["modelValue"]),e("div",Kt,[e("button",{onClick:t[12]||(t[12]=s=>f(D).get(n.route("sales"),{advanced:{from:b.value.from,to:b.value.to}})),class:"text-white rounded-lg bg-green-500 hover:bg-green-600 active:bg-green-800 duration-200 ease-in-out px-6 py-2 text-sm"},"Submit"),e("button",{onClick:t[13]||(t[13]=s=>k.value=!1),class:"dark:text-white hover:underline text-sm"},"Cancel")])])]),_:1},8,["show"]),d(F,{show:j.value,onClose:t[17]||(t[17]=s=>j.value=!1),"max-width":"md",closeable:!1},{default:p(()=>[e("div",Wt,[d(N,{type:"date",id:"jump",modelValue:z.value,"onUpdate:modelValue":t[15]||(t[15]=s=>z.value=s),class:"w-full"},null,8,["modelValue"]),e("div",Jt,[e("button",{onClick:Z,class:"text-white rounded-lg bg-green-500 hover:bg-green-600 active:bg-green-800 duration-200 ease-in-out px-6 py-2 text-sm"},"Jump"),e("button",{onClick:t[16]||(t[16]=s=>j.value=!1),class:"dark:text-white hover:underline text-sm"},"Cancel")])])]),_:1},8,["show"]),C.value?(a(),i("div",Xt,[d(Oe,{receipt:C.value,id:"receipt"},null,8,["receipt"])])):m("",!0)],64))}};export{os as default};
