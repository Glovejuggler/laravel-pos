import{q as E,s as Q,r as $,m as Y,x as ee,o as u,f as c,b as n,l as te,g as ne,F as w,T as re,a as p,w as O,u as x,Z as oe,h as k,t as C,p as ae,y as se}from"./app-bx6r09WD.js";import{_ as G}from"./Modal-B8EYgpVm.js";import{_ as I}from"./InputLabel-B5yz-yQR.js";import{_ as N}from"./TextInput-LJVBlx_m.js";function le(e){var s=typeof e;return e!=null&&(s=="object"||s=="function")}var H=le,ie=typeof E=="object"&&E&&E.Object===Object&&E,de=ie,ue=de,ce=typeof self=="object"&&self&&self.Object===Object&&self,fe=ue||ce||Function("return this")(),q=fe,me=q,pe=function(){return me.Date.now()},ve=pe,be=/\s/;function ge(e){for(var s=e.length;s--&&be.test(e.charAt(s)););return s}var xe=ge,ye=xe,he=/^\s+/;function we(e){return e&&e.slice(0,ye(e)+1).replace(he,"")}var _e=we,ke=q,je=ke.Symbol,X=je,B=X,Z=Object.prototype,$e=Z.hasOwnProperty,Se=Z.toString,j=B?B.toStringTag:void 0;function Te(e){var s=$e.call(e,j),r=e[j];try{e[j]=void 0;var d=!0}catch{}var o=Se.call(e);return d&&(s?e[j]=r:delete e[j]),o}var Ee=Te,Oe=Object.prototype,Ce=Oe.toString;function Ie(e){return Ce.call(e)}var De=Ie,A=X,Ve=Ee,Ne=De,Le="[object Null]",Me="[object Undefined]",U=A?A.toStringTag:void 0;function ze(e){return e==null?e===void 0?Me:Le:U&&U in Object(e)?Ve(e):Ne(e)}var Fe=ze;function Ge(e){return e!=null&&typeof e=="object"}var Be=Ge,Ae=Fe,Ue=Be,Pe="[object Symbol]";function Re(e){return typeof e=="symbol"||Ue(e)&&Ae(e)==Pe}var We=Re,He=_e,P=H,qe=We,R=NaN,Xe=/^[-+]0x[0-9a-f]+$/i,Ze=/^0b[01]+$/i,Je=/^0o[0-7]+$/i,Ke=parseInt;function Qe(e){if(typeof e=="number")return e;if(qe(e))return R;if(P(e)){var s=typeof e.valueOf=="function"?e.valueOf():e;e=P(s)?s+"":s}if(typeof e!="string")return e===0?e:+e;e=He(e);var r=Ze.test(e);return r||Je.test(e)?Ke(e.slice(2),r?2:8):Xe.test(e)?R:+e}var Ye=Qe,et=H,L=ve,W=Ye,tt="Expected a function",nt=Math.max,rt=Math.min;function ot(e,s,r){var d,o,f,v,m,g,h=0,S=!1,a=!1,t=!0;if(typeof e!="function")throw new TypeError(tt);s=W(s)||0,et(r)&&(S=!!r.leading,a="maxWait"in r,f=a?nt(W(r.maxWait)||0,s):f,t="trailing"in r?!!r.trailing:t);function l(i){var y=d,_=o;return d=o=void 0,h=i,v=e.apply(_,y),v}function b(i){return h=i,m=setTimeout(T,s),S?l(i):v}function D(i){var y=i-g,_=i-h,F=s-y;return a?rt(F,f-_):F}function M(i){var y=i-g,_=i-h;return g===void 0||y>=s||y<0||a&&_>=f}function T(){var i=L();if(M(i))return z(i);m=setTimeout(T,D(i))}function z(i){return m=void 0,t&&d?l(i):(d=o=void 0,v)}function J(){m!==void 0&&clearTimeout(m),h=0,d=g=o=m=void 0}function K(){return m===void 0?v:z(L())}function V(){var i=L(),y=M(i);if(d=arguments,o=this,g=i,y){if(m===void 0)return b(g);if(a)return clearTimeout(m),m=setTimeout(T,s),l(g)}return m===void 0&&(m=setTimeout(T,s)),v}return V.cancel=J,V.flush=K,V}var at=ot;const st=Q(at),lt={key:0,class:"mt-4 pb-8 text-center"},it={__name:"InfiniteScroll",props:{loadMore:Function},setup(e){const s=e,r=$(!1);let d=st(()=>{document.documentElement.offsetHeight-document.documentElement.scrollTop-(window.innerHeight??screen.height)<200&&!r.value&&(r.value=!0,s.loadMore().finally(()=>r.value=!1))},100);return Y(()=>{window.addEventListener("scroll",d)}),ee(()=>{window.removeEventListener("scroll",d)}),(o,f)=>(u(),c(w,null,[n("div",null,[te(o.$slots,"default")]),r.value?(u(),c("div",lt,[...f[0]||(f[0]=[n("i",{class:"bx bx-loader-alt animate-spin text-3xl text-gray-800 dark:text-white/50"},null,-1)])])):ne("",!0)],64))}},dt={class:"max-w-7xl mx-auto py-8 px-6 lg:px-8 dark:text-white"},ut={class:"flex items-center mb-4"},ct={key:0,class:"border dark:border-zinc-700 rounded-lg"},ft={class:"w-full table bg-white dark:bg-zinc-900 dark:text-white rounded-lg overflow-hidden"},mt={class:"dark:odd:bg-zinc-800 odd:bg-zinc-200"},pt={class:"px-4 py-2"},vt={class:"px-4 py-2 space-y-2"},bt={class:"px-4 py-2 space-y-2"},gt={class:"px-4 py-2 space-y-2"},xt={class:"px-4 py-2 space-y-2"},yt={class:"flex items-center space-x-2"},ht=["onClick"],wt=["onClick"],_t={key:1,class:"flex justify-center mt-14"},kt={class:"p-4"},jt={class:"flex mt-8 flex-row-reverse gap-4"},$t={class:"p-4 dark:text-white"},St={class:"flex mt-4 flex-row-reverse gap-4"},It={__name:"Index",props:{expenses:Object},setup(e){const r=$(e.expenses),d=$(!1),o=re({created_at:"",type:"",item:"",amount:""}),f=$(!1),v=$(null),m=a=>{o.created_at=new Date(a.created_at).toLocaleDateString("sv-SE"),o.type=a.type,o.item=a.item,o.amount=a.amount,o.id=a.id,d.value=!0},g=()=>{o.put(route("expenses.update",o.id),{preserveScroll:!0,preserveState:a=>Object.keys(a.props.errors).length>0,onSuccess:a=>{Object.keys(a.props.errors).length===1&&o.reset()}})},h=a=>{v.value=a,f.value=!0},S=()=>r.value.next_page_url?axios.get(r.value.next_page_url).then(a=>{console.log(a.data),r.value={...a.data,data:{...r.value.data,...a.data.data}}}):Promise.resolve();return(a,t)=>(u(),c(w,null,[p(x(oe),null,{default:O(()=>[...t[10]||(t[10]=[n("title",null,`
            Expenses
        `,-1)])]),_:1}),n("div",dt,[n("div",ut,[t[11]||(t[11]=n("span",{class:"font-semibold mr-8"},"Expenses",-1)),n("i",{onClick:t[0]||(t[0]=l=>a.$inertia.get(a.route("expenses.create"))),class:"bx bx-plus rounded-full hover:bg-black/20 dark:hover:bg-white/20 w-8 h-8 inline-flex justify-center items-center duration-200 ease-in-out"})]),Object.keys(r.value.data).length?(u(),c("div",ct,[p(it,{"load-more":S},{default:O(()=>[n("table",ft,[t[12]||(t[12]=n("thead",{class:"text-left"},[n("tr",null,[n("th",{class:"px-4 py-2"},"Date"),n("th",{class:"px-4 py-2"},"Item"),n("th",{class:"px-4 py-2"},"Amount"),n("th",{class:"px-4 py-2"},"Deduct from")])],-1)),n("tbody",null,[(u(!0),c(w,null,k(Object.keys(r.value.data),l=>(u(),c("tr",mt,[n("td",pt,C(l),1),n("td",vt,[(u(!0),c(w,null,k(r.value.data[l],b=>(u(),c("p",null,C(b.item),1))),256))]),n("td",bt,[(u(!0),c(w,null,k(r.value.data[l],b=>(u(),c("p",null,C(b.amount),1))),256))]),n("td",gt,[(u(!0),c(w,null,k(r.value.data[l],b=>(u(),c("p",null,C(b.type),1))),256))]),n("td",xt,[(u(!0),c(w,null,k(r.value.data[l],b=>(u(),c("div",yt,[n("i",{onClick:D=>m(b),class:"bx bx-edit w-6 h-6 inline-flex justify-center items-center bg-green-500 hover:bg-green-600 active:bg-green-800 duration-200 ease-in-out rounded-full"},null,8,ht),n("i",{onClick:D=>h(b),class:"bx bx-trash w-6 h-6 inline-flex justify-center items-center bg-red-500 hover:bg-red-600 active:bg-red-800 duration-200 ease-in-out rounded-full"},null,8,wt)]))),256))])]))),256))])])]),_:1})])):(u(),c("div",_t,[...t[13]||(t[13]=[n("div",{class:"flex justify-center items-center flex-col text-zinc-700 dark:text-zinc-400"},[n("i",{class:"bx bx-ghost text-7xl"}),n("p",null,"Oohh... It's empty in here.")],-1)])]))]),p(G,{show:d.value,onClose:t[6]||(t[6]=l=>d.value=!1),"max-width":"md"},{default:O(()=>[n("div",kt,[t[15]||(t[15]=n("span",{class:"dark:text-white font-bold"},"Edit Expense",-1)),p(I,{value:"Date",for:"editExpenseData.created_at",class:"mt-4"}),p(N,{type:"date",id:"editExpenseData.created_at",class:"w-full mt-2",modelValue:x(o).created_at,"onUpdate:modelValue":t[1]||(t[1]=l=>x(o).created_at=l)},null,8,["modelValue"]),p(I,{value:"Item",class:"mt-4"}),p(N,{type:"text",class:"w-full mt-2",modelValue:x(o).item,"onUpdate:modelValue":t[2]||(t[2]=l=>x(o).item=l)},null,8,["modelValue"]),p(I,{value:"Amount",class:"mt-4"}),p(N,{type:"text",class:"w-full mt-2",modelValue:x(o).amount,"onUpdate:modelValue":t[3]||(t[3]=l=>x(o).amount=l)},null,8,["modelValue"]),p(I,{value:"Deduct from",class:"mt-4"}),ae(n("select",{"onUpdate:modelValue":t[4]||(t[4]=l=>x(o).type=l),id:"categories",class:"w-full mt-2 border-zinc-300 dark:border-zinc-700 dark:bg-zinc-900 dark:text-zinc-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm"},[...t[14]||(t[14]=[n("option",{value:"",selected:"",hidden:"",disabled:""},"Choose one",-1),n("option",{value:"Net"},"Net",-1),n("option",{value:"COGS"},"COGS",-1)])],512),[[se,x(o).type]]),n("div",jt,[n("button",{onClick:g,class:"px-8 py-2 text-white text-sm bg-green-500 hover:bg-green-600 active:bg-green-800 duration-200 ease-in-out rounded-lg"},"Save"),n("button",{onClick:t[5]||(t[5]=l=>d.value=!1),class:"dark:text-white text-sm hover:underline"},"Cancel")])])]),_:1},8,["show"]),p(G,{show:f.value,onClose:t[9]||(t[9]=l=>f.value=!1),"max-width":"md"},{default:O(()=>[n("div",$t,[t[16]||(t[16]=n("p",{class:"font-bold mb-2"},"Confirmation",-1)),t[17]||(t[17]=n("span",null,"Are you sure you want to delete?",-1)),n("div",St,[n("button",{onClick:t[7]||(t[7]=l=>a.$inertia.delete(a.route("expenses.destroy",v.value),{onSuccess:()=>{f.value=!1,v.value=null}})),class:"px-8 py-2 text-white text-sm bg-red-500 hover:bg-red-600 active:bg-red-800 duration-200 ease-in-out rounded-lg"},"Delete"),n("button",{onClick:t[8]||(t[8]=l=>f.value=!1),class:"dark:text-white text-sm hover:underline"},"Cancel")])])]),_:1},8,["show"])],64))}};export{It as default};
