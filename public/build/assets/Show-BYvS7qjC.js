import{T as j,r as b,o as d,f as r,a as n,w as y,u as i,b as e,t as g,g as p,e as z,i as U,q as B,F as v,k as V,Z as D}from"./app-tESl9fh7.js";import{_ as x}from"./InputLabel-DsCfYGBJ.js";import{_ as f}from"./TextInput-PvJSR4BW.js";import{_ as S}from"./Modal-CjhT9gKs.js";const I={class:"max-w-screen-lg mx-auto mt-8"},N={class:"dark:text-white mb-8"},A={class:"lg:grid grid-cols-3 gap-4"},F={key:0,class:"absolute inset-0 flex justify-center items-center bg-black/40 group-hover:opacity-100 opacity-0 duration-200 ease-in-out"},M=e("i",{class:"bx bx-photo-album text-5xl text-white p-3 rounded-full"},null,-1),L=[M],O={key:1,class:"bx bx-plus font-bold text-3xl text-white"},R=["src"],T={class:"col-span-2 p-6 rounded-lg bg-zinc-800"},q=["selected"],E=["value","selected"],P=e("p",{class:"block font-medium text-sm text-zinc-700 dark:text-zinc-300 mt-4 select-none"},"Breakdown of cost",-1),Z=["onClick"],G=e("div",{class:"flex justify-end"},[e("button",{"type-":"submit",class:"rounded-lg px-4 py-2 bg-green-500 hover:bg-green-700 active:bg-green-900 text-white text-sm duration-200 ease-in-out"},"Save")],-1),H={class:"flex justify-end py-8"},J={class:"p-4 dark:text-white"},K=e("p",{class:"font-bold"},"Confirmation",-1),Q={class:"mt-4 flex justify-end space-x-2"},te={__name:"Show",props:{item:Object,categories:Object},setup(s){const u=s,l=j({category_id:u.item.category_id,image:"",name:u.item.name,price:u.item.price,breakdown:u.item.costing}),w=b(null),k=b(null),C=()=>{if(l.image){let a=new FileReader;a.readAsDataURL(l.image),a.onload=t=>{k.value=t.target.result}}},_=()=>{l.breakdown.push({name:"",cost:""})},$=a=>{l.breakdown.splice(a,1)},c=b(!1);return(a,t)=>(d(),r(v,null,[n(i(D),null,{default:y(()=>[e("title",null,`
            `+g(s.item.name)+`
        `,1)]),_:1}),e("div",I,[e("p",N,g(s.item.name),1),e("div",A,[e("div",{onClick:t[0]||(t[0]=o=>w.value.click()),class:"h-72 w-72 rounded-lg overflow-hidden bg-zinc-700 flex justify-center items-center relative group"},[s.item.pic?(d(),r("div",F,L)):p("",!0),!i(l).image&&!s.item.pic?(d(),r("i",O)):p("",!0),i(l).image||s.item.pic?(d(),r("img",{key:2,src:k.value||`../../storage/${s.item.pic}`,class:"w-72 h-72 object-cover",alt:""},null,8,R)):p("",!0)]),e("div",T,[e("form",{onSubmit:t[5]||(t[5]=z(o=>i(l).post(a.route("items.update",s.item)),["prevent"])),enctype:"multipart/form-data"},[e("input",{ref_key:"newImage",ref:w,onInput:t[1]||(t[1]=o=>i(l).image=o.target.files[0]),onChange:C,type:"file",accept:"image/*",hidden:""},null,544),n(x,{for:"categories",value:"Category"}),U(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>i(l).category_id=o),id:"categories",class:"w-full mt-2 border-zinc-300 dark:border-zinc-700 dark:bg-zinc-900 dark:text-zinc-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm"},[e("option",{hidden:"",disabled:"",selected:s.item.category_id===69420},"Select category",8,q),(d(!0),r(v,null,V(s.categories,o=>(d(),r("option",{value:o.id,selected:s.item.category_id===o.id},g(o.name),9,E))),256))],512),[[B,i(l).category_id]]),n(x,{class:"mt-4",for:"name",value:"Name"}),n(f,{id:"name",type:"text",modelValue:i(l).name,"onUpdate:modelValue":t[3]||(t[3]=o=>i(l).name=o),class:"mt-2 w-full block"},null,8,["modelValue"]),n(x,{class:"mt-4",for:"price",value:"Price"}),n(f,{id:"price",type:"number",modelValue:i(l).price,"onUpdate:modelValue":t[4]||(t[4]=o=>i(l).price=o),class:"mt-2 w-full block"},null,8,["modelValue"]),P,(d(!0),r(v,null,V(i(l).breakdown,(o,h)=>(d(),r("div",{key:h,class:"grid grid-cols-11 gap-2 m-2"},[n(f,{type:"text",modelValue:o.name,"onUpdate:modelValue":m=>o.name=m,class:"w-full block col-span-5",placeholder:"Item"},null,8,["modelValue","onUpdate:modelValue"]),n(f,{type:"number",modelValue:o.cost,"onUpdate:modelValue":m=>o.cost=m,class:"w-full block col-span-5",placeholder:"Cost"},null,8,["modelValue","onUpdate:modelValue"]),e("i",{onClick:m=>$(h),class:"bx bx-x p-2 w-8 h-8 rounded-lg text-white bg-red-500 hover:bg-red-700 duration-200 ease-in-out inline-flex justify-center items-center"},null,8,Z)]))),128)),e("button",{type:"button",class:"text-xs px-4 py-1 rounded-lg bg-zinc-400 text-white",onClick:_},"Add"),G],32)])]),e("div",H,[e("button",{onClick:t[6]||(t[6]=o=>c.value=!0),type:"button",class:"text-red-500 border border-red-500 px-4 hover:bg-red-500 hover:text-white rounded-lg text-sm"},"Delete")])]),n(S,{show:c.value,onClose:t[9]||(t[9]=o=>c.value=!1),"max-width":"md"},{default:y(()=>[e("div",J,[K,e("p",null,"Are you sure you want to delete "+g(s.item.name)+"?",1),e("div",Q,[e("button",{onClick:t[7]||(t[7]=o=>c.value=!1),class:"dark:text-white hover:underline"},"Cancel"),e("button",{onClick:t[8]||(t[8]=o=>a.$inertia.delete(a.route("items.destroy",s.item))),class:"bg-red-500 hover:bg-red-700 active:bg-red-900 duration-200 ease-in-out px-3 py-1 text-white rounded-lg"},"Delete")])])]),_:1},8,["show"])],64))}};export{te as default};
