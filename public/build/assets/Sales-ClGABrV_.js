import{o as a,f as i,b as e,t as o,F as j,h as z,k as A,r as c,T as Z,D as W,m as J,a as r,w as g,u as m,g as x,Z as K,d as X,O as k,B as Y}from"./app-CwN049UX.js";import{_ as C}from"./Modal-CO4ygNEF.js";import{Z as ee}from"./index-CbjWbaYu.js";import{_ as E}from"./InputLabel-BdMzTB9r.js";import{_ as O}from"./TextInput-BTwSGPYQ.js";import{_ as L}from"./ExpensesCard-XDVVTpvm.js";const te={class:"w-64 bg-white pb-6 z-10"},se=e("div",{class:"flex justify-center"},[e("img",{src:"logo.jpg",class:"w-32",alt:""})],-1),le={class:"grid grid-cols-2"},oe={class:"text-right"},ne={class:"grid grid-cols-2"},ae=e("b",null,"Type",-1),ie={class:"text-right"},de=e("hr",{class:"border-black mt-2"},null,-1),re=e("div",{class:"flex justify-between"},[e("p",null,"Item"),e("p",null,"Subtotal")],-1),ce=e("hr",{class:"border-black mb-2"},null,-1),ue={class:"flex justify-between pl-4 w-full"},he={class:"w-full"},me=e("hr",{class:"border-black my-2"},null,-1),fe={class:"font-bold text-lg flex justify-between"},ve=e("p",null,"TOTAL",-1),be={class:"pl-4"},xe=e("hr",{class:"border-black my-2"},null,-1),pe=e("div",{class:"flex justify-center"},[e("p",null,"Thank you. Come again.")],-1),ge={class:"flex justify-between text-sm"},_e=e("p",null,"Cashier",-1),we={class:"flex justify-between text-sm"},ye=e("p",null,"Order ID",-1),$e={class:"text-right"},ke={class:"flex justify-between text-sm"},Ce=e("p",{class:"w-max"},"Order Time",-1),je={class:"w-max"},De=e("div",{class:"flex flex-col items-center justify-center text-sm mt-2 w-full"},[e("b",null,"UPTop Diner"),e("p",null,"25 L. Geirosa Ave., Brgy. Silangan"),e("p",null,"Calauan, Laguna"),e("p",null,"La Famiglia Building 2nd Floor")],-1),Fe=e("hr",{class:"border-black my-2"},null,-1),Te=e("p",null,"THIS IS NOT AN OFFICIAL RECEIPT",-1),Ie={__name:"Receipt",props:{receipt:{type:Object,required:!0}},setup(l){return(u,D)=>(a(),i("div",te,[se,e("div",le,[e("p",null,o(l.receipt.name??" "),1),e("p",oe,o(`Order #${l.receipt.number}`),1)]),e("div",ne,[ae,e("b",ie,o(l.receipt.type),1)]),de,re,ce,e("div",null,[(a(!0),i(j,null,z(l.receipt.items,h=>(a(),i("div",null,[e("p",null,o(h.name),1),e("div",ue,[e("p",he,o(Number(h.price).amountFormat())+" x"+o(h.quantity),1),e("p",null,o((h.quantity*h.price).amountFormat()),1)])]))),256)),me,e("div",null,[e("div",fe,[ve,e("p",null,o(l.receipt.gross.amountFormat()),1)]),e("div",be,[e("p",null,"CASH: "+o(Number(l.receipt.payment).amountFormat()),1),e("p",null,"CHANGE: "+o((l.receipt.payment-l.receipt.gross).amountFormat()),1)])]),xe,pe,e("div",ge,[_e,e("p",null,o(u.$page.props.auth.user.name),1)]),e("div",we,[ye,e("p",$e,o(`dQw4w9WgXcQ${l.receipt.id.pad(4)}`),1)]),e("div",ke,[Ce,e("p",je,o(Intl.DateTimeFormat("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"numeric",hour12:!0}).format(new Date(l.receipt.created_at))),1)]),De,Fe,Te])]))}},Se=e("title",null,`
            Sales
        `,-1),Oe={class:"max-w-7xl mx-auto px-6 py-8 lg:px-8 z-50"},ze={class:"flex justify-between items-center mb-4"},Ne={key:0,class:"flex space-x-2 items-center"},Ve={key:1,class:"dark:text-white"},Ae={key:0,class:"w-full rounded-lg dark:bg-zinc-800 bg-white dark:text-white p-4 flex flex-col relative"},Ee={key:0,class:"w-full lg:w-1/4"},Le={class:"flex justify-between"},Me=e("span",null,"Total orders:",-1),He={class:"flex justify-between"},Pe=e("span",null,"Gross sales:",-1),Be={class:"flex justify-between"},Re=e("span",null,"Cost of goods sold:",-1),qe={class:"flex justify-between"},Ue=e("span",null,"Income:",-1),Ge={class:"flex justify-between"},Qe=e("span",null,"Net Income:",-1),Ze={key:1,class:"w-full lg:w-1/4"},We=e("b",null,"Inventory Expense",-1),Je={class:"flex justify-between"},Ke=e("span",null,"Cost of goods sold:",-1),Xe={class:"flex justify-end"},Ye={class:"lg:absolute bottom-0 right-0 lg:p-4 mt-2 space-x-2 self-end"},et=["disabled"],tt=["disabled"],st={key:1,class:"dark:text-white w-full bg-white dark:bg-zinc-800 text-left text-sm rounded-lg overflow-hidden mt-4"},lt=e("th",{class:"p-4"},"Customer",-1),ot={class:"p-4"},nt=e("th",{class:"p-4"},"Order Type",-1),at=e("th",{class:"p-4"},"Orders",-1),it=e("th",{class:"p-4"},"Quantity",-1),dt=e("th",{class:"p-4"},"Gross Sales",-1),rt=e("th",{class:"p-4"},"Net Income",-1),ct=e("th",{class:"p-4"},"Actions",-1),ut={class:"bg-white dark:bg-zinc-800 border-b border-zinc-700"},ht={class:"px-4 py-2"},mt={class:"px-4 py-2"},ft={key:0,class:"text-xs opacity-70"},vt={class:"px-4 py-2"},bt={class:"px-4 py-2"},xt={class:"px-4 py-2"},pt={class:"px-4 py-2"},gt={class:"px-4 py-2"},_t={class:"px-4 py-2"},wt={class:"flex space-x-2"},yt=["onClick"],$t=["onClick"],kt={class:"bg-white font-bold dark:bg-zinc-800"},Ct={class:"px-4 py-2"},jt=e("td",{class:"px-4 py-2"},null,-1),Dt=e("td",{class:"px-4 py-2"},null,-1),Ft=e("td",{class:"px-4 py-2"},null,-1),Tt=e("td",{class:"px-4 py-2"},null,-1),It={class:"px-4 py-2"},St={class:"px-4 py-2"},Ot=e("td",{class:"px-4 py-2"},null,-1),zt={key:2,class:"flex justify-center mt-14"},Nt=e("div",{class:"flex justify-center items-center flex-col text-zinc-700 dark:text-zinc-400"},[e("i",{class:"bx bx-ghost text-7xl"}),e("p",null,"Oohh... It's empty in here.")],-1),Vt=[Nt],At={class:"dark:text-white p-6"},Et=e("p",{class:"font-bold"},"Confirmation",-1),Lt=e("p",{class:"mt-4"},"This transaction record will be deleted. Enter the code to continue.",-1),Mt={class:"flex justify-center mt-4 font-bold tracking-wider text-4xl"},Ht={class:"dark:text-white p-4"},Pt=e("p",{class:"font-bold"},"Confirmation",-1),Bt=e("p",{class:"mt-4"},"Print this receipt?",-1),Rt={class:"mt-4 grid grid-cols-2 gap-2"},qt={class:"dark:text-white p-4"},Ut={class:"flex flex-row-reverse gap-4 mt-8"},Gt={class:"dark:text-white p-4"},Qt={class:"flex flex-row-reverse mt-4 gap-4"},Zt={key:0,class:"fixed top-0 -left-96"},ts={__name:"Sales",props:{transactions:Object,filters:Object,total:Object,batchDates:Object,expenses:Object},setup(l){const u=l,D=A(()=>u.expenses.net.reduce((n,t)=>n+Number(t.amount),0)),h=A(()=>u.expenses.cogs.reduce((n,t)=>n+Number(t.amount),0)),M=(n,t)=>{const s=Math.ceil(n),d=Math.floor(t);return Math.floor(Math.random()*(d-s+1)+s)},_=c(!1),N=c(null),F=c(""),T=c(null),H=n=>{N.value=n,F.value=M(1e5,999999),_.value=!0,Y(()=>T.value.focus())},P=n=>{n==F.value&&k.delete(route("order.cancel",N.value.id),{onStart:()=>T.value.disabled=!0,onSuccess:()=>_.value=!1})},f=u.filters.date?new Date(u.filters.date):new Date,B=f<new Date(new Date().setHours(0,0,0,0)),I=n=>{let t=new Date(n);return Intl.DateTimeFormat("en-PH",{month:"long",day:"numeric",year:"numeric"}).format(t)},R=Z({search:u.filters.search,date:u.filters.date}),v=c({from:"",to:""}),w=c(!1);W(R,n=>{k.get(route("sales"),n,{preserveState:!0,preserveScroll:!0,replace:!0})},{deep:!0});const q=d=>{var d=parseInt(d,10),t=Math.floor(d/3600),s=Math.floor((d-t*3600)/60),d=d-t*3600-s*60;return t?s?`${t}h ${s}m ${d}s`:`${t}h ${d}s`:s?`${s}m ${d}s`:`${d}s`},V=c(!1);J(()=>{let n=navigator.userAgent.toLowerCase();V.value=n.indexOf("android")>-1});const p=c(!1),y=c(null),U=n=>{y.value=n,p.value=!0},G=()=>{const n=document.getElementById("receipt");ee(n,{quality:1,scale:2}).then(t=>{console.log(t),V.value&&(window.location.href="rawbt:"+t)}).finally(()=>{p.value=!1,y.value=null})},b=c(1),$=c(!1),S=c(null),Q=()=>{let n=new Date(S.value).toLocaleDateString("en-PH");console.log(n),k.get(route("sales"),{date:n})};return(n,t)=>(a(),i(j,null,[r(m(K),null,{default:g(()=>[Se]),_:1}),e("div",Oe,[e("div",ze,[l.filters.advanced===void 0?(a(),i("div",Ne,[e("i",{onClick:t[0]||(t[0]=s=>n.$inertia.get(n.route("sales"),{date:new Date(m(f).setDate(m(f).getDate()-1)).toLocaleDateString("en-PH")})),class:"bx bxs-chevron-left dark:text-white hover:bg-white hover:text-zinc-900 w-6 h-6 inline-flex justify-center items-center rounded-full border dark:border-white"}),e("p",{onClick:t[1]||(t[1]=s=>$.value=!0),class:"dark:text-white font-semibold cursor-pointer"},o(m(f).toWordFormat()),1),B?(a(),i("i",{key:0,onClick:t[2]||(t[2]=s=>n.$inertia.get(n.route("sales"),{date:new Date(m(f).setDate(m(f).getDate()+1)).toLocaleDateString("en-PH")})),class:"bx bxs-chevron-right dark:text-white hover:bg-white hover:text-zinc-900 w-6 h-6 inline-flex justify-center items-center rounded-full border dark:border-white"})):x("",!0)])):(a(),i("span",Ve,o(`${I(l.batchDates.from)} to ${I(l.batchDates.to)}`),1)),e("button",{onClick:t[3]||(t[3]=s=>w.value=!0),class:"text-sm dark:text-white hover:underline hover:text-blue-500 duration-200 ease-in-out"},"Advanced filter")]),l.transactions.length?(a(),i("div",Ae,[b.value===1?(a(),i("div",Ee,[e("div",Le,[Me,e("b",null,o(l.transactions.length),1)]),e("div",He,[Pe,e("b",null,o(l.total.gross.amountFormat()),1)]),e("div",Be,[Re,e("b",null,o(l.total.cost.amountFormat()),1)]),e("div",qe,[Ue,e("b",null,o((l.total.gross-l.total.cost).amountFormat()),1)]),r(L,{title:"Expenses",data:l.expenses.net,total:D.value},null,8,["data","total"]),e("div",Ge,[Qe,e("b",null,o((l.total.gross-l.total.cost-D.value).amountFormat()),1)])])):x("",!0),b.value===2?(a(),i("div",Ze,[We,e("div",Je,[Ke,e("b",null,o(l.total.cost.amountFormat()),1)]),r(L,{title:"Expenses",data:l.expenses.cogs,total:h.value},null,8,["data","total"]),e("div",Xe,[e("b",null,o((l.total.cost-h.value).amountFormat()),1)])])):x("",!0),e("div",Ye,[e("button",{onClick:t[4]||(t[4]=s=>b.value-=1),disabled:b.value===1,class:"bx bxs-chevron-left dark:text-white enabled:hover:bg-white enabled:hover:text-zinc-900 w-6 h-6 inline-flex justify-center items-center rounded-full border dark:border-white disabled:opacity-20"},null,8,et),e("button",{onClick:t[5]||(t[5]=s=>b.value+=1),disabled:b.value===2,class:"bx bxs-chevron-right dark:text-white enabled:hover:bg-white enabled:hover:text-zinc-900 w-6 h-6 inline-flex justify-center items-center rounded-full border dark:border-white disabled:opacity-20"},null,8,tt)])])):x("",!0),l.transactions.length?(a(),i("table",st,[e("thead",null,[e("tr",null,[lt,e("th",ot,o(l.batchDates?"Date":"Time"),1),nt,at,it,dt,rt,ct])]),e("tbody",null,[(a(!0),i(j,null,z(l.transactions,s=>(a(),i("tr",ut,[e("td",ht,o(s.name??`#${s.number}`),1),e("td",mt,[X(o(l.batchDates?I(s.created_at):new Date(s.created_at).toTimeFormat())+" ",1),l.batchDates?x("",!0):(a(),i("span",ft,o(q(s.elapsed)),1))]),e("td",vt,o(s.type),1),e("td",bt,[e("div",null,[(a(!0),i(j,null,z(s.items,d=>(a(),i("p",null,o(`${d.name} x${d.quantity}`),1))),256))])]),e("td",xt,o(s.quantity),1),e("td",pt,o(s.gross.amountFormat()),1),e("td",gt,o((s.gross-s.cost).amountFormat()),1),e("td",_t,[e("div",wt,[e("i",{onClick:d=>U(s),class:"bx bx-printer dark:text-white inline-flex justify-center items-center p-2 rounded-full bg-green-500 hover:bg-green-700 active:bg-green-900 duration-200 ease-in-out cursor-pointer"},null,8,yt),e("i",{onClick:d=>H(s),class:"bx bx-trash dark:text-white inline-flex justify-center items-center p-2 rounded-full bg-red-500 hover:bg-red-700 active:bg-red-900 duration-200 ease-in-out cursor-pointer"},null,8,$t)])])]))),256)),e("tr",kt,[e("td",Ct,o(l.transactions.length),1),jt,Dt,Ft,Tt,e("td",It,o(l.total.gross.amountFormat()),1),e("td",St,o((l.total.gross-l.total.cost).amountFormat()),1),Ot])])])):(a(),i("div",zt,Vt))]),r(C,{show:_.value,"max-width":"md",onClose:t[7]||(t[7]=s=>_.value=!1)},{default:g(()=>[e("div",At,[Et,Lt,e("div",Mt,o(F.value),1),e("input",{ref_key:"codeInput",ref:T,onKeyup:t[6]||(t[6]=s=>P(s.target.value)),class:"bg-zinc-900 w-full rounded-lg mt-2 disabled:opacity-50",type:"text"},null,544)])]),_:1},8,["show"]),r(C,{show:p.value,onClose:t[9]||(t[9]=s=>p.value=!1)},{default:g(()=>[e("div",Ht,[Pt,Bt,e("div",Rt,[e("button",{onClick:G,class:"bg-green-500 rounded-lg py-2 hover:bg-green-600 active:bg-green-800 duration-200 ease-in-out"},"Yes"),e("button",{onClick:t[8]||(t[8]=s=>p.value=!1),class:"bg-zinc-500 rounded-lg py-2 hover:bg-zinc-600 active:bg-zinc-900 duration-200 ease-in-out"},"Cancel")])])]),_:1},8,["show"]),r(C,{show:w.value,onClose:t[14]||(t[14]=s=>w.value=!1),"max-width":"md",closeable:!1},{default:g(()=>[e("div",qt,[r(E,{for:"from",value:"From"}),r(O,{type:"date",id:"from",modelValue:v.value.from,"onUpdate:modelValue":t[10]||(t[10]=s=>v.value.from=s),class:"w-full mt-2"},null,8,["modelValue"]),r(E,{class:"mt-4",for:"to",value:"To"}),r(O,{type:"date",id:"to",modelValue:v.value.to,"onUpdate:modelValue":t[11]||(t[11]=s=>v.value.to=s),class:"w-full mt-2"},null,8,["modelValue"]),e("div",Ut,[e("button",{onClick:t[12]||(t[12]=s=>m(k).get(n.route("sales"),{advanced:{from:v.value.from,to:v.value.to}})),class:"text-white rounded-lg bg-green-500 hover:bg-green-600 active:bg-green-800 duration-200 ease-in-out px-6 py-2 text-sm"},"Submit"),e("button",{onClick:t[13]||(t[13]=s=>w.value=!1),class:"dark:text-white hover:underline text-sm"},"Cancel")])])]),_:1},8,["show"]),r(C,{show:$.value,onClose:t[17]||(t[17]=s=>$.value=!1),"max-width":"md",closeable:!1},{default:g(()=>[e("div",Gt,[r(O,{type:"date",id:"jump",modelValue:S.value,"onUpdate:modelValue":t[15]||(t[15]=s=>S.value=s),class:"w-full"},null,8,["modelValue"]),e("div",Qt,[e("button",{onClick:Q,class:"text-white rounded-lg bg-green-500 hover:bg-green-600 active:bg-green-800 duration-200 ease-in-out px-6 py-2 text-sm"},"Jump"),e("button",{onClick:t[16]||(t[16]=s=>$.value=!1),class:"dark:text-white hover:underline text-sm"},"Cancel")])])]),_:1},8,["show"]),y.value?(a(),i("div",Zt,[r(Ie,{receipt:y.value,id:"receipt"},null,8,["receipt"])])):x("",!0)],64))}};export{ts as default};
