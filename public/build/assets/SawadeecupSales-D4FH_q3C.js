import{k as E,r,T as G,D as J,m as K,o as a,f as i,a as d,w as x,u,b as e,t as n,g,F as z,h as M,Z as W,O as k,B as Y}from"./app-CwN049UX.js";import{_ as C}from"./Modal-CO4ygNEF.js";import{Z as Q}from"./index-CbjWbaYu.js";import{_ as N}from"./InputLabel-BdMzTB9r.js";import{_ as S}from"./TextInput-BTwSGPYQ.js";import{_ as P}from"./ExpensesCard-XDVVTpvm.js";import{_ as X}from"./SawadeecupReceipt-Bt8eUWwN.js";const ee=e("title",null,`\r
            Sales\r
        `,-1),te={class:"max-w-7xl mx-auto px-6 py-8 lg:px-8 z-50"},se={class:"flex justify-between items-center mb-4"},oe={key:0,class:"flex space-x-2 items-center"},le={key:1,class:"dark:text-white"},ne={key:0,class:"w-full rounded-lg dark:bg-zinc-800 bg-white dark:text-white p-4 flex flex-col relative"},ae={key:0,class:"w-full lg:w-1/4"},ie={class:"flex justify-between"},de=e("span",null,"Total orders:",-1),re={class:"flex justify-between"},ue=e("span",null,"Gross sales:",-1),ce={class:"flex justify-between"},me=e("span",null,"Cost of goods sold:",-1),fe={class:"flex justify-between"},he=e("span",null,"Income:",-1),ve={class:"flex justify-between"},be=e("span",null,"Net Income:",-1),xe={key:1,class:"w-full lg:w-1/4"},ge=e("b",null,"Inventory Expense",-1),pe={class:"flex justify-between"},we=e("span",null,"Cost of goods sold:",-1),_e={class:"flex justify-end"},ye={class:"lg:absolute bottom-0 right-0 lg:p-4 mt-2 space-x-2 self-end"},ke=["disabled"],Ce=["disabled"],De={key:1,class:"dark:text-white w-full bg-white dark:bg-zinc-800 text-left text-sm rounded-lg overflow-hidden mt-4"},$e=e("th",{class:"p-4"},"Customer",-1),je={class:"p-4"},Fe=e("th",{class:"p-4"},"Orders",-1),ze=e("th",{class:"p-4"},"Gross Sales",-1),Se=e("th",{class:"p-4"},"Net Income",-1),Ve=e("th",{class:"p-4"},"Actions",-1),Te={class:"bg-white dark:bg-zinc-800 border-b border-zinc-700"},Ie={class:"px-4 py-2"},Oe={class:"px-4 py-2"},Ee={class:"px-4 py-2"},Me={class:"px-4 py-2"},Ne={class:"px-4 py-2"},Pe={class:"px-4 py-2"},Ae={class:"flex space-x-2"},Be=["onClick"],He=["onClick"],Le={class:"bg-white font-bold dark:bg-zinc-800"},Re={class:"px-4 py-2"},Ue=e("td",{class:"px-4 py-2"},null,-1),Ze=e("td",{class:"px-4 py-2"},null,-1),qe={class:"px-4 py-2"},Ge={class:"px-4 py-2"},Je=e("td",{class:"px-4 py-2"},null,-1),Ke={key:2,class:"flex justify-center mt-14"},We=e("div",{class:"flex justify-center items-center flex-col text-zinc-700 dark:text-zinc-400"},[e("i",{class:"bx bx-ghost text-7xl"}),e("p",null,"Oohh... It's empty in here.")],-1),Ye=[We],Qe={class:"dark:text-white p-6"},Xe=e("p",{class:"font-bold"},"Confirmation",-1),et=e("p",{class:"mt-4"},"This transaction record will be deleted. Enter the code to continue.",-1),tt={class:"flex justify-center mt-4 font-bold tracking-wider text-4xl"},st={class:"dark:text-white p-4"},ot=e("p",{class:"font-bold"},"Confirmation",-1),lt=e("p",{class:"mt-4"},"Print this receipt?",-1),nt={class:"mt-4 grid grid-cols-2 gap-2"},at={class:"dark:text-white p-4"},it={class:"flex flex-row-reverse gap-4 mt-8"},dt={class:"dark:text-white p-4"},rt={class:"flex flex-row-reverse mt-4 gap-4"},ut={key:0,class:"fixed top-0 -left-96"},gt={__name:"SawadeecupSales",props:{transactions:Object,filters:Object,total:Object,batchDates:Object,expenses:Object},setup(l){const c=l,V=E(()=>c.expenses.net.reduce((o,t)=>o+Number(t.amount),0)),T=E(()=>c.expenses.cogs.reduce((o,t)=>o+Number(t.amount),0)),A=(o,t)=>{const s=Math.ceil(o),v=Math.floor(t);return Math.floor(Math.random()*(v-s+1)+s)},p=r(!1),I=r(null),D=r(""),$=r(null),B=o=>{I.value=o,D.value=A(1e5,999999),p.value=!0,Y(()=>$.value.focus())},H=o=>{o==D.value&&k.delete(route("order.cancel",I.value.id),{onStart:()=>$.value.disabled=!0,onSuccess:()=>p.value=!1})},m=c.filters.date?new Date(c.filters.date):new Date,L=m<new Date(new Date().setHours(0,0,0,0)),j=o=>{let t=new Date(o);return Intl.DateTimeFormat("en-PH",{month:"long",day:"numeric",year:"numeric"}).format(t)},R=G({search:c.filters.search,date:c.filters.date}),f=r({from:"",to:""}),w=r(!1);J(R,o=>{k.get(route("sales"),o,{preserveState:!0,preserveScroll:!0,replace:!0})},{deep:!0});const O=r(!1);K(()=>{let o=navigator.userAgent.toLowerCase();O.value=o.indexOf("android")>-1});const b=r(!1),_=r(null),U=o=>{_.value=o,b.value=!0},Z=()=>{const o=document.getElementById("receipt");Q(o,{quality:1,scale:2}).then(t=>{console.log(t),O.value&&(window.location.href="rawbt:"+t)}).finally(()=>{b.value=!1,_.value=null})},h=r(1),y=r(!1),F=r(null),q=()=>{let o=new Date(F.value).toLocaleDateString("en-PH");console.log(o),k.get(route("sales"),{date:o})};return(o,t)=>(a(),i(z,null,[d(u(W),null,{default:x(()=>[ee]),_:1}),e("div",te,[e("div",se,[l.filters.advanced===void 0?(a(),i("div",oe,[e("i",{onClick:t[0]||(t[0]=s=>o.$inertia.get(o.route("sales"),{date:new Date(u(m).setDate(u(m).getDate()-1)).toLocaleDateString("en-PH")})),class:"bx bxs-chevron-left dark:text-white hover:bg-white hover:text-zinc-900 w-6 h-6 inline-flex justify-center items-center rounded-full border dark:border-white"}),e("p",{onClick:t[1]||(t[1]=s=>y.value=!0),class:"dark:text-white font-semibold cursor-pointer"},n(u(m).toWordFormat()),1),L?(a(),i("i",{key:0,onClick:t[2]||(t[2]=s=>o.$inertia.get(o.route("sales"),{date:new Date(u(m).setDate(u(m).getDate()+1)).toLocaleDateString("en-PH")})),class:"bx bxs-chevron-right dark:text-white hover:bg-white hover:text-zinc-900 w-6 h-6 inline-flex justify-center items-center rounded-full border dark:border-white"})):g("",!0)])):(a(),i("span",le,n(`${j(l.batchDates.from)} to ${j(l.batchDates.to)}`),1)),e("button",{onClick:t[3]||(t[3]=s=>w.value=!0),class:"text-sm dark:text-white hover:underline hover:text-blue-500 duration-200 ease-in-out"},"Advanced filter")]),l.transactions.length?(a(),i("div",ne,[h.value===1?(a(),i("div",ae,[e("div",ie,[de,e("b",null,n(l.transactions.length),1)]),e("div",re,[ue,e("b",null,n(l.total.gross.amountFormat()),1)]),e("div",ce,[me,e("b",null,n(l.total.cost.amountFormat()),1)]),e("div",fe,[he,e("b",null,n((l.total.gross-l.total.cost).amountFormat()),1)]),d(P,{title:"Expenses",data:l.expenses.net,total:V.value},null,8,["data","total"]),e("div",ve,[be,e("b",null,n((l.total.gross-l.total.cost-V.value).amountFormat()),1)])])):g("",!0),h.value===2?(a(),i("div",xe,[ge,e("div",pe,[we,e("b",null,n(l.total.cost.amountFormat()),1)]),d(P,{title:"Expenses",data:l.expenses.cogs,total:T.value},null,8,["data","total"]),e("div",_e,[e("b",null,n((l.total.cost-T.value).amountFormat()),1)])])):g("",!0),e("div",ye,[e("button",{onClick:t[4]||(t[4]=s=>h.value-=1),disabled:h.value===1,class:"bx bxs-chevron-left dark:text-white enabled:hover:bg-white enabled:hover:text-zinc-900 w-6 h-6 inline-flex justify-center items-center rounded-full border dark:border-white disabled:opacity-20"},null,8,ke),e("button",{onClick:t[5]||(t[5]=s=>h.value+=1),disabled:h.value===2,class:"bx bxs-chevron-right dark:text-white enabled:hover:bg-white enabled:hover:text-zinc-900 w-6 h-6 inline-flex justify-center items-center rounded-full border dark:border-white disabled:opacity-20"},null,8,Ce)])])):g("",!0),l.transactions.length?(a(),i("table",De,[e("thead",null,[e("tr",null,[$e,e("th",je,n(l.batchDates?"Date":"Time"),1),Fe,ze,Se,Ve])]),e("tbody",null,[(a(!0),i(z,null,M(l.transactions,s=>(a(),i("tr",Te,[e("td",Ie,n(s.name??`#${s.number}`),1),e("td",Oe,n(l.batchDates?j(s.created_at):new Date(s.created_at).toTimeFormat()),1),e("td",Ee,[e("div",null,[(a(!0),i(z,null,M(s.items,v=>(a(),i("p",null,n(`${v.name} x${v.quantity}`),1))),256))])]),e("td",Me,n(s.gross.amountFormat()),1),e("td",Ne,n((s.gross-s.cost).amountFormat()),1),e("td",Pe,[e("div",Ae,[e("i",{onClick:v=>U(s),class:"bx bx-printer dark:text-white inline-flex justify-center items-center p-2 rounded-full bg-green-500 hover:bg-green-700 active:bg-green-900 duration-200 ease-in-out cursor-pointer"},null,8,Be),e("i",{onClick:v=>B(s),class:"bx bx-trash dark:text-white inline-flex justify-center items-center p-2 rounded-full bg-red-500 hover:bg-red-700 active:bg-red-900 duration-200 ease-in-out cursor-pointer"},null,8,He)])])]))),256)),e("tr",Le,[e("td",Re,n(l.transactions.length),1),Ue,Ze,e("td",qe,n(l.total.gross.amountFormat()),1),e("td",Ge,n((l.total.gross-l.total.cost).amountFormat()),1),Je])])])):(a(),i("div",Ke,Ye))]),d(C,{show:p.value,"max-width":"md",onClose:t[7]||(t[7]=s=>p.value=!1)},{default:x(()=>[e("div",Qe,[Xe,et,e("div",tt,n(D.value),1),e("input",{ref_key:"codeInput",ref:$,onKeyup:t[6]||(t[6]=s=>H(s.target.value)),class:"bg-zinc-900 w-full rounded-lg mt-2 disabled:opacity-50",type:"text"},null,544)])]),_:1},8,["show"]),d(C,{show:b.value,onClose:t[9]||(t[9]=s=>b.value=!1)},{default:x(()=>[e("div",st,[ot,lt,e("div",nt,[e("button",{onClick:Z,class:"bg-green-500 rounded-lg py-2 hover:bg-green-600 active:bg-green-800 duration-200 ease-in-out"},"Yes"),e("button",{onClick:t[8]||(t[8]=s=>b.value=!1),class:"bg-zinc-500 rounded-lg py-2 hover:bg-zinc-600 active:bg-zinc-900 duration-200 ease-in-out"},"Cancel")])])]),_:1},8,["show"]),d(C,{show:w.value,onClose:t[14]||(t[14]=s=>w.value=!1),"max-width":"md",closeable:!1},{default:x(()=>[e("div",at,[d(N,{for:"from",value:"From"}),d(S,{type:"date",id:"from",modelValue:f.value.from,"onUpdate:modelValue":t[10]||(t[10]=s=>f.value.from=s),class:"w-full mt-2"},null,8,["modelValue"]),d(N,{class:"mt-4",for:"to",value:"To"}),d(S,{type:"date",id:"to",modelValue:f.value.to,"onUpdate:modelValue":t[11]||(t[11]=s=>f.value.to=s),class:"w-full mt-2"},null,8,["modelValue"]),e("div",it,[e("button",{onClick:t[12]||(t[12]=s=>u(k).get(o.route("sales"),{advanced:{from:f.value.from,to:f.value.to}})),class:"text-white rounded-lg bg-green-500 hover:bg-green-600 active:bg-green-800 duration-200 ease-in-out px-6 py-2 text-sm"},"Submit"),e("button",{onClick:t[13]||(t[13]=s=>w.value=!1),class:"dark:text-white hover:underline text-sm"},"Cancel")])])]),_:1},8,["show"]),d(C,{show:y.value,onClose:t[17]||(t[17]=s=>y.value=!1),"max-width":"md",closeable:!1},{default:x(()=>[e("div",dt,[d(S,{type:"date",id:"jump",modelValue:F.value,"onUpdate:modelValue":t[15]||(t[15]=s=>F.value=s),class:"w-full"},null,8,["modelValue"]),e("div",rt,[e("button",{onClick:q,class:"text-white rounded-lg bg-green-500 hover:bg-green-600 active:bg-green-800 duration-200 ease-in-out px-6 py-2 text-sm"},"Jump"),e("button",{onClick:t[16]||(t[16]=s=>y.value=!1),class:"dark:text-white hover:underline text-sm"},"Cancel")])])]),_:1},8,["show"]),_.value?(a(),i("div",ut,[d(X,{receipt:_.value,id:"receipt"},null,8,["receipt"])])):g("",!0)],64))}};export{gt as default};
