import{o as i,f as r,b as e,t as o,F as w,h as F,r as c,T as q,A as B,y as E,a as u,w as g,u as h,g as y,d as b,Z as P,O as D,s as G}from"./app-a1v3dBTI.js";import{_ as j}from"./Modal-BgBaVvSR.js";import{Z as U}from"./index-CbjWbaYu.js";import{_ as I}from"./InputLabel-ClGPS9aO.js";import{_ as z}from"./TextInput-DH2AD-6t.js";const Q={class:"w-64 bg-white pb-6 z-10"},Z=e("div",{class:"flex justify-center"},[e("img",{src:"logo.jpg",class:"w-32",alt:""})],-1),W={class:"grid grid-cols-2"},K={class:"text-right"},X={class:"grid grid-cols-2"},Y=e("b",null,"Type",-1),J={class:"text-right"},ee=e("hr",{class:"border-black mt-2"},null,-1),te=e("div",{class:"flex justify-between"},[e("p",null,"Item"),e("p",null,"Subtotal")],-1),se=e("hr",{class:"border-black mb-2"},null,-1),oe={class:"flex justify-between pl-4 w-full"},le={class:"w-full"},ne=e("hr",{class:"border-black my-2"},null,-1),ae={class:"font-bold text-lg flex justify-between"},ie=e("p",null,"TOTAL",-1),re={class:"pl-4"},de=e("hr",{class:"border-black my-2"},null,-1),ce=e("div",{class:"flex justify-center"},[e("p",null,"Thank you. Come again.")],-1),ue={class:"flex justify-between text-sm"},he=e("p",null,"Cashier",-1),me={class:"flex justify-between text-sm"},fe=e("p",null,"Order ID",-1),pe={class:"text-right"},ve={class:"flex justify-between text-sm"},be=e("p",{class:"w-max"},"Order Time",-1),xe={class:"w-max"},_e=e("div",{class:"flex flex-col items-center justify-center text-sm mt-2 w-full"},[e("b",null,"UPTop Diner"),e("p",null,"25 L. Geirosa Ave., Brgy. Silangan"),e("p",null,"Calauan, Laguna"),e("p",null,"La Famiglia Building 2nd Floor")],-1),ge=e("hr",{class:"border-black my-2"},null,-1),ye=e("p",null,"THIS IS NOT AN OFFICIAL RECEIPT",-1),we={__name:"Receipt",props:{receipt:{type:Object,required:!0}},setup(l){return(m,T)=>(i(),r("div",Q,[Z,e("div",W,[e("p",null,o(l.receipt.name??" "),1),e("p",K,o(`Order #${l.receipt.number}`),1)]),e("div",X,[Y,e("b",J,o(l.receipt.type),1)]),ee,te,se,e("div",null,[(i(!0),r(w,null,F(l.receipt.items,d=>(i(),r("div",null,[e("p",null,o(d.name),1),e("div",oe,[e("p",le,o(Number(d.price).amountFormat())+" x"+o(d.quantity),1),e("p",null,o((d.quantity*d.price).amountFormat()),1)])]))),256)),ne,e("div",null,[e("div",ae,[ie,e("p",null,o(l.receipt.gross.amountFormat()),1)]),e("div",re,[e("p",null,"CASH: "+o(Number(l.receipt.payment).amountFormat()),1),e("p",null,"CHANGE: "+o((l.receipt.payment-l.receipt.gross).amountFormat()),1)])]),de,ce,e("div",ue,[he,e("p",null,o(m.$page.props.auth.user.name),1)]),e("div",me,[fe,e("p",pe,o(`dQw4w9WgXcQ${l.receipt.id.pad(4)}`),1)]),e("div",ve,[be,e("p",xe,o(Intl.DateTimeFormat("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"numeric",hour12:!0}).format(new Date(l.receipt.created_at))),1)]),_e,ge,ye])]))}},$e=e("title",null,`
            Sales
        `,-1),ke={class:"max-w-7xl mx-auto px-6 py-8 lg:px-8 z-50"},Ce={class:"flex justify-between items-center mb-4"},De={key:0,class:"flex space-x-2 items-center"},je={class:"dark:text-white font-semibold"},Fe={key:1,class:"dark:text-white"},Te={key:0,class:"w-full rounded-lg dark:bg-zinc-800 bg-white dark:text-white p-4 flex flex-col"},Se={key:1,class:"dark:text-white w-full bg-white dark:bg-zinc-800 text-left text-sm rounded-lg overflow-hidden mt-4"},Oe=e("th",{class:"p-4"},"Customer",-1),Ie={class:"p-4"},ze=e("th",{class:"p-4"},"Order Type",-1),Ae=e("th",{class:"p-4"},"Orders",-1),Ne=e("th",{class:"p-4"},"Quantity",-1),Ve=e("th",{class:"p-4"},"Gross Sales",-1),Le=e("th",{class:"p-4"},"Net Income",-1),Me=e("th",{class:"p-4"},"Actions",-1),He={class:"bg-white dark:bg-zinc-800 border-b border-zinc-700"},Re={class:"px-4 py-2"},qe={class:"px-4 py-2"},Be={key:0,class:"text-xs opacity-70"},Ee={class:"px-4 py-2"},Pe={class:"px-4 py-2"},Ge={class:"px-4 py-2"},Ue={class:"px-4 py-2"},Qe={class:"px-4 py-2"},Ze={class:"px-4 py-2"},We={class:"flex space-x-2"},Ke=["onClick"],Xe=["onClick"],Ye={class:"bg-white font-bold dark:bg-zinc-800"},Je={class:"px-4 py-2"},et=e("td",{class:"px-4 py-2"},null,-1),tt=e("td",{class:"px-4 py-2"},null,-1),st=e("td",{class:"px-4 py-2"},null,-1),ot=e("td",{class:"px-4 py-2"},null,-1),lt={class:"px-4 py-2"},nt={class:"px-4 py-2"},at=e("td",{class:"px-4 py-2"},null,-1),it={key:2,class:"flex justify-center mt-14"},rt=e("div",{class:"flex justify-center items-center flex-col text-zinc-700 dark:text-zinc-400"},[e("i",{class:"bx bx-ghost text-7xl"}),e("p",null,"Oohh... It's empty in here.")],-1),dt=[rt],ct={class:"dark:text-white p-6"},ut=e("p",{class:"font-bold"},"Confirmation",-1),ht=e("p",{class:"mt-4"},"This transaction record will be deleted. Enter the code to continue.",-1),mt={class:"flex justify-center mt-4 font-bold tracking-wider text-4xl"},ft={class:"dark:text-white p-4"},pt=e("p",{class:"font-bold"},"Confirmation",-1),vt=e("p",{class:"mt-4"},"Print this receipt?",-1),bt={class:"mt-4 grid grid-cols-2 gap-2"},xt={class:"dark:text-white p-4"},_t={class:"flex flex-row-reverse gap-4 mt-8"},gt={key:0,class:"fixed top-0 -left-96"},Dt={__name:"Sales",props:{transactions:Object,filters:Object,total:Object,batchDates:Object,expenses:Object},setup(l){const m=l,T=(n,t)=>{const s=Math.ceil(n),a=Math.floor(t);return Math.floor(Math.random()*(a-s+1)+s)},d=c(!1),S=c(null),$=c(""),k=c(null),A=n=>{S.value=n,$.value=T(1e5,999999),d.value=!0,G(()=>k.value.focus())},N=n=>{n==$.value&&D.delete(route("order.cancel",S.value.id),{onStart:()=>k.value.disabled=!0,onSuccess:()=>d.value=!1})},f=m.filters.date?new Date(m.filters.date):new Date,V=f<new Date(new Date().setHours(0,0,0,0)),C=n=>{let t=new Date(n);return Intl.DateTimeFormat("en-PH",{month:"long",day:"numeric",year:"numeric"}).format(t)},L=q({search:m.filters.search,date:m.filters.date}),p=c({from:"",to:""}),x=c(!1);B(L,n=>{D.get(route("sales"),n,{preserveState:!0,preserveScroll:!0,replace:!0})},{deep:!0});const M=a=>{var a=parseInt(a,10),t=Math.floor(a/3600),s=Math.floor((a-t*3600)/60),a=a-t*3600-s*60;return t?s?`${t}h ${s}m ${a}s`:`${t}h ${a}s`:s?`${s}m ${a}s`:`${a}s`},O=c(!1);E(()=>{let n=navigator.userAgent.toLowerCase();O.value=n.indexOf("android")>-1});const v=c(!1),_=c(null),H=n=>{_.value=n,v.value=!0},R=()=>{const n=document.getElementById("receipt");U(n,{quality:1,scale:2}).then(t=>{console.log(t),O.value&&(window.location.href="rawbt:"+t)}).finally(()=>{v.value=!1,_.value=null})};return(n,t)=>(i(),r(w,null,[u(h(P),null,{default:g(()=>[$e]),_:1}),e("div",ke,[e("div",Ce,[l.filters.advanced===void 0?(i(),r("div",De,[e("i",{onClick:t[0]||(t[0]=s=>n.$inertia.get(n.route("sales"),{date:new Date(h(f).setDate(h(f).getDate()-1)).toLocaleDateString("en-PH")})),class:"bx bxs-chevron-left dark:text-white hover:bg-white hover:text-zinc-900 w-6 h-6 inline-flex justify-center items-center rounded-full border dark:border-white"}),e("p",je,o(h(f).toWordFormat()),1),V?(i(),r("i",{key:0,onClick:t[1]||(t[1]=s=>n.$inertia.get(n.route("sales"),{date:new Date(h(f).setDate(h(f).getDate()+1)).toLocaleDateString("en-PH")})),class:"bx bxs-chevron-right dark:text-white hover:bg-white hover:text-zinc-900 w-6 h-6 inline-flex justify-center items-center rounded-full border dark:border-white"})):y("",!0)])):(i(),r("span",Fe,o(`${C(l.batchDates.from)} to ${C(l.batchDates.to)}`),1)),e("button",{onClick:t[2]||(t[2]=s=>x.value=!0),class:"text-sm dark:text-white hover:underline hover:text-blue-500 duration-200 ease-in-out"},"Advanced filter")]),l.transactions.length?(i(),r("div",Te,[e("span",null,[b("Total Orders: "),e("b",null,o(l.transactions.length),1)]),e("span",null,[b("Gross Sales: "),e("b",null,o(l.total.gross.amountFormat()),1)]),e("span",null,[b("Cost of Goods Sold: "),e("b",null,o(l.total.cost.amountFormat()),1)]),e("span",null,[b("Income: "),e("b",null,o((l.total.gross-l.total.cost).amountFormat()),1)])])):y("",!0),l.transactions.length?(i(),r("table",Se,[e("thead",null,[e("tr",null,[Oe,e("th",Ie,o(l.batchDates?"Date":"Time"),1),ze,Ae,Ne,Ve,Le,Me])]),e("tbody",null,[(i(!0),r(w,null,F(l.transactions,s=>(i(),r("tr",He,[e("td",Re,o(s.name??`#${s.number}`),1),e("td",qe,[b(o(l.batchDates?C(s.created_at):new Date(s.created_at).toTimeFormat())+" ",1),l.batchDates?y("",!0):(i(),r("span",Be,o(M(s.elapsed)),1))]),e("td",Ee,o(s.type),1),e("td",Pe,[e("div",null,[(i(!0),r(w,null,F(s.items,a=>(i(),r("p",null,o(`${a.name} x${a.quantity}`),1))),256))])]),e("td",Ge,o(s.quantity),1),e("td",Ue,o(s.gross.amountFormat()),1),e("td",Qe,o((s.gross-s.cost).amountFormat()),1),e("td",Ze,[e("div",We,[e("i",{onClick:a=>H(s),class:"bx bx-printer dark:text-white inline-flex justify-center items-center p-2 rounded-full bg-green-500 hover:bg-green-700 active:bg-green-900 duration-200 ease-in-out cursor-pointer"},null,8,Ke),e("i",{onClick:a=>A(s),class:"bx bx-trash dark:text-white inline-flex justify-center items-center p-2 rounded-full bg-red-500 hover:bg-red-700 active:bg-red-900 duration-200 ease-in-out cursor-pointer"},null,8,Xe)])])]))),256)),e("tr",Ye,[e("td",Je,o(l.transactions.length),1),et,tt,st,ot,e("td",lt,o(l.total.gross.amountFormat()),1),e("td",nt,o((l.total.gross-l.total.cost).amountFormat()),1),at])])])):(i(),r("div",it,dt))]),u(j,{show:d.value,"max-width":"md",onClose:t[4]||(t[4]=s=>d.value=!1)},{default:g(()=>[e("div",ct,[ut,ht,e("div",mt,o($.value),1),e("input",{ref_key:"codeInput",ref:k,onKeyup:t[3]||(t[3]=s=>N(s.target.value)),class:"bg-zinc-900 w-full rounded-lg mt-2 disabled:opacity-50",type:"text"},null,544)])]),_:1},8,["show"]),u(j,{show:v.value,onClose:t[6]||(t[6]=s=>v.value=!1)},{default:g(()=>[e("div",ft,[pt,vt,e("div",bt,[e("button",{onClick:R,class:"bg-green-500 rounded-lg py-2 hover:bg-green-600 active:bg-green-800 duration-200 ease-in-out"},"Yes"),e("button",{onClick:t[5]||(t[5]=s=>v.value=!1),class:"bg-zinc-500 rounded-lg py-2 hover:bg-zinc-600 active:bg-zinc-900 duration-200 ease-in-out"},"Cancel")])])]),_:1},8,["show"]),u(j,{show:x.value,onClose:t[11]||(t[11]=s=>x.value=!1),"max-width":"md"},{default:g(()=>[e("div",xt,[u(I,{for:"from",value:"From"}),u(z,{type:"date",id:"from",modelValue:p.value.from,"onUpdate:modelValue":t[7]||(t[7]=s=>p.value.from=s),class:"w-full mt-2"},null,8,["modelValue"]),u(I,{class:"mt-4",for:"to",value:"To"}),u(z,{type:"date",id:"to",modelValue:p.value.to,"onUpdate:modelValue":t[8]||(t[8]=s=>p.value.to=s),class:"w-full mt-2"},null,8,["modelValue"]),e("div",_t,[e("button",{onClick:t[9]||(t[9]=s=>h(D).get(n.route("sales"),{advanced:{from:p.value.from,to:p.value.to}})),class:"text-white rounded-lg bg-green-500 hover:bg-green-600 active:bg-green-800 duration-200 ease-in-out px-6 py-2 text-sm"},"Submit"),e("button",{onClick:t[10]||(t[10]=s=>x.value=!1),class:"dark:text-white hover:underline text-sm"},"Cancel")])])]),_:1},8,["show"]),_.value?(i(),r("div",gt,[u(we,{receipt:_.value,id:"receipt"},null,8,["receipt"])])):y("",!0)],64))}};export{Dt as default};
