import{_ as V,k as r,h as M,z as B,o as a,f as i,a as C,w as $,u as N,b as t,F as v,l as p,e as b,d as D,t as c,g as m,i as E,B as F,n as I,s as L,Z as U,x as Z,y as q}from"./app-DZUnaK7f.js";import{_ as A}from"./Modal-D7zJgaSQ.js";const x=d=>(Z("data-v-68f400aa"),d=d(),q(),d),G=x(()=>t("title",null,`
            POS
        `,-1)),H={class:"p-4 flex space-x-2"},J=["onClick"],K=["src"],Q={class:"absolute bottom-0 inset-x-0 bg-black/50 p-2 text-white"},R={class:"absolute top-2 right-2 bg-black/50 text-white rounded-lg p-1"},W={class:"flex justify-between"},X={class:"ml-8"},Y={class:"absolute bottom-0 w-full bg-zinc-800 flex"},ee=["onClick"],te={class:"fixed w-3/12 inset-y-0 right-0 bg-zinc-800 p-4"},se={class:"h-1/2 relative overflow-y-auto"},le={class:"text-white flex justify-between"},ne={class:"flex space-x-1"},oe=["onClick"],ae={class:"flex space-x-1"},ie=["onClick"],ue=x(()=>t("i",{class:"bx bx-trash"},null,-1)),ce=[ue],re={key:0,class:"font-bold text-white absolute bottom-2"},de={class:"text-2xl font-black"},ve=x(()=>t("hr",{class:"border-gray-500"},null,-1)),pe={key:0,class:"h-1/2 relative"},be=x(()=>t("span",{class:"mt-4 text-white"},"Payment",-1)),xe={class:"relative block"},fe={class:"grid grid-cols-2 md:grid-cols-5 gap-2 my-2"},he={key:0,class:"text-white mt-2"},me=["disabled"],ge={class:"flex justify-center p-4 bg-white text-gray-900 text-3xl font-bold uppercase"},_e=Object.assign({layout:null},{__name:"POS",props:{items:Object,categories:Object},setup(d){const g=d,_=r(null),w=r(null),j=r(null),y=l=>{w.value=l,_.value=g.items[l]},n=r(null),u=M(()=>{var l;return(l=n.value)==null?void 0:l.reduce((s,e)=>s+e.price*e.count,0)}),o=r(0),f=r(!1),k=r(null),z=()=>{f.value=!0},S=l=>{if(n.value){var s=n.value.findIndex(e=>e.id===l.id);s==-1?(l.count=1,n.value.push(l)):n.value[s].count+=1}else l.count=1,n.value=[l]},O=l=>{var s=n.value.findIndex(e=>e.id===l.id);n.value[s].count-=1,n.value[s].count===0&&n.value.splice(s,1)},P=l=>{var s=n.value.findIndex(e=>e.id===l.id);n.value.splice(s,1)},T=()=>{L.post(route("transaction.save"),{items:n.value,payment:o.value}).then(l=>{k.value=l.data}).finally(()=>{n.value=null,o.value=null,z()})};return B(()=>{y(g.categories[0].name)}),(l,s)=>(a(),i(v,null,[C(N(U),null,{default:$(()=>[G]),_:1}),t("div",{class:"fixed w-9/12 inset-y-0 left-0 select-none",onContextmenu:s[2]||(s[2]=b(()=>{},["prevent"]))},[t("div",H,[(a(!0),i(v,null,p(_.value,e=>(a(),i("div",{class:"border flex w-48 h-48 relative active:scale-95 duration-150 ease-in-out rounded-md overflow-hidden",onClick:h=>S(e),ontouchstart:""},[t("img",{draggable:"false",onContextmenu:s[0]||(s[0]=b(()=>{},["prevent"])),onDragstart:s[1]||(s[1]=b(()=>{},["prevent"])),src:`../storage/${e.pic}`,class:"w-48 h-48 object-cover",height:"25px",width:"25px",alt:""},null,40,K),t("p",Q,c(e.name),1),t("span",R,c(e.price),1)],8,J))),256))]),t("div",{id:"receipt",ref_key:"receipt",ref:j},[(a(!0),i(v,null,p(n.value,e=>(a(),i("div",null,[t("p",null,c(e.name),1),t("div",W,[t("span",X,c(`${e.price} x${e.count}`),1),t("span",null,c(e.price*e.count),1)])]))),256))],512),t("div",Y,[(a(!0),i(v,null,p(d.categories,e=>(a(),i("div",{class:I([{"bg-blue-500 text-white font-bold":w.value===e.name},"py-2 px-4 text-zinc-300 border-r border-zinc-700"]),onClick:h=>y(e.name)},c(e.name),11,ee))),256))])],32),t("div",te,[t("div",se,[(a(!0),i(v,null,p(n.value,e=>(a(),i("div",le,[t("div",ne,[t("button",{onClick:h=>O(e),class:"w-4 h-4 bg-blue-500 inline-flex justify-center items-center"},"-",8,oe),t("span",null,c(`${e.name} x${e.count}`),1)]),t("div",ae,[t("span",null,c(e.price*e.count),1),t("button",{onClick:h=>P(e),class:"w-5 h-5 bg-red-500 inline-flex justify-center items-center"},ce,8,ie)])]))),256)),u.value>0?(a(),i("p",re,[D("Total: "),t("span",de,c(u.value),1)])):m("",!0)]),ve,u.value?(a(),i("div",pe,[be,t("label",xe,[E(t("input",{"onUpdate:modelValue":s[3]||(s[3]=e=>o.value=e),class:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none duration-300 ease-in-out placeholder:text-xs placeholder:text-gray-400 text-white block bg-zinc-900 w-full border-slate-300 dark:border-slate-300/20 rounded-md py-2 pl-3 pr-9 shadow-sm focus:border-indigo-300 focus:ring-indigo-200 focus:ring focus:ring-opacity-50",placeholder:"P 0.00",type:"number",name:"payment"},null,512),[[F,o.value]]),t("i",{onClick:s[4]||(s[4]=b(e=>o.value=null,["self"])),class:"bx bx-x-circle text-white/40 absolute text-xl inset-y-0 right-0 flex items-center pr-3 hover:text-red-500"})]),t("div",fe,[t("button",{class:"p-2 text-sm font-bold text-gray-800 bg-white rounded-md active:scale-95",onClick:s[5]||(s[5]=e=>o.value+=50)},"50"),t("button",{class:"p-2 text-sm font-bold text-gray-800 bg-white rounded-md active:scale-95",onClick:s[6]||(s[6]=e=>o.value+=100)},"100"),t("button",{class:"p-2 text-sm font-bold text-gray-800 bg-white rounded-md active:scale-95",onClick:s[7]||(s[7]=e=>o.value+=200)},"200"),t("button",{class:"p-2 text-sm font-bold text-gray-800 bg-white rounded-md active:scale-95",onClick:s[8]||(s[8]=e=>o.value+=500)},"500"),t("button",{class:"p-2 text-xs font-bold text-gray-800 bg-white rounded-md active:scale-95",onClick:s[9]||(s[9]=e=>o.value+=1e3)},"1000"),t("button",{class:"bg-white rounded-md w-full p-2 font-bold text-sm active:scale-[0.98] col-span-5",onClick:s[10]||(s[10]=e=>o.value=u.value)},"Exact amount")]),o.value>u.value?(a(),i("p",he,"Change: "+c(u.value&&o.value-u.value),1)):m("",!0),t("button",{class:I(["bg-white rounded-md text-sm w-full p-2 font-bold enabled:active:scale-[0.98] absolute bottom-0 right-0",{"opacity-50":u.value&&o.value<u.value}]),onClick:T,disabled:u.value&&o.value<u.value},"Place order",10,me)])):m("",!0)]),C(A,{"max-width":"sm",show:f.value,onClose:s[11]||(s[11]=e=>f.value=!1)},{default:$(()=>[t("div",ge,c(k.value),1)]),_:1},8,["show"])],64))}}),ke=V(_e,[["__scopeId","data-v-68f400aa"]]);export{ke as default};
