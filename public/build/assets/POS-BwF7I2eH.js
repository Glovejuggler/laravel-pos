import{k as d,h as j,o as i,f as u,a as h,w as g,u as I,b as s,F as p,l as m,e as c,d as V,t as r,g as b,i as P,z as T,n as M,s as N,Z as O}from"./app-C2IC8kHz.js";import{_ as B}from"./Modal-Bl_cIhRR.js";const D=s("title",null,`
            POS
        `,-1),S={class:"p-4 flex space-x-2"},z=["onClick"],E=["src"],F={class:"absolute bottom-0 inset-x-0 bg-black/50 p-2 text-white"},L={class:"absolute top-2 right-2 bg-black/50 text-white rounded-lg p-1"},U={class:"fixed w-3/12 inset-y-0 right-0 bg-gray-800 p-4"},Z={class:"h-1/2 relative overflow-y-auto"},q={class:"text-white flex justify-between"},A={class:"flex space-x-1"},G=["onClick"],H={class:"flex space-x-1"},J=["onClick"],K=s("i",{class:"bx bx-trash"},null,-1),Q=[K],R={key:0,class:"font-bold text-white absolute bottom-2"},W={class:"text-2xl font-black"},X=s("hr",{class:"border-gray-500"},null,-1),Y={key:0,class:"h-1/2 relative"},ee=s("span",{class:"mt-4 text-white"},"Payment",-1),te={class:"relative block"},se={class:"grid grid-cols-5 gap-2 my-2"},le={key:0,class:"text-white mt-2"},oe=["disabled"],ne={class:"flex justify-center p-4 bg-white text-gray-900 text-3xl font-bold uppercase"},ue=Object.assign({layout:null},{__name:"POS",props:{items:Object},setup(w){const l=d(null),a=j(()=>{var n;return(n=l.value)==null?void 0:n.reduce((e,t)=>e+t.price*t.count,0)}),o=d(0),v=d(!1),x=d(null),_=()=>{v.value=!0},y=n=>{if(l.value){var e=l.value.findIndex(t=>t.id===n.id);e==-1?(n.count=1,l.value.push(n)):l.value[e].count+=1}else n.count=1,l.value=[n]},k=n=>{var e=l.value.findIndex(t=>t.id===n.id);l.value[e].count-=1,l.value[e].count===0&&l.value.splice(e,1)},C=n=>{var e=l.value.findIndex(t=>t.id===n.id);l.value.splice(e,1)},$=()=>{N.post(route("transaction.save"),{items:l.value,payment:o.value}).then(n=>{x.value=n.data}).finally(()=>{l.value=null,o.value=null,_()})};return(n,e)=>(i(),u(p,null,[h(I(O),null,{default:g(()=>[D]),_:1}),s("div",{class:"fixed w-9/12 inset-y-0 left-0 select-none",onContextmenu:e[2]||(e[2]=c(()=>{},["prevent"]))},[s("div",S,[(i(!0),u(p,null,m(w.items,t=>(i(),u("div",{class:"border flex w-48 h-48 relative active:scale-95 duration-150 ease-in-out rounded-md overflow-hidden",onClick:f=>y(t),ontouchstart:""},[s("img",{draggable:"false",onContextmenu:e[0]||(e[0]=c(()=>{},["prevent"])),onDragstart:e[1]||(e[1]=c(()=>{},["prevent"])),src:`../storage/${t.pic}`,class:"w-48 h-48 object-cover",height:"25px",width:"25px",alt:""},null,40,E),s("p",F,r(t.name),1),s("span",L,r(t.price),1)],8,z))),256))])],32),s("div",U,[s("div",Z,[(i(!0),u(p,null,m(l.value,t=>(i(),u("div",q,[s("div",A,[s("button",{onClick:f=>k(t),class:"w-4 h-4 bg-blue-500 inline-flex justify-center items-center"},"-",8,G),s("span",null,r(`${t.name} x${t.count}`),1)]),s("div",H,[s("span",null,r(t.price*t.count),1),s("button",{onClick:f=>C(t),class:"w-5 h-5 bg-red-500 inline-flex justify-center items-center"},Q,8,J)])]))),256)),a.value>0?(i(),u("p",R,[V("Total: "),s("span",W,r(a.value),1)])):b("",!0)]),X,a.value?(i(),u("div",Y,[ee,s("label",te,[P(s("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.value=t),class:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none duration-300 ease-in-out placeholder:text-xs placeholder:text-gray-400 text-white block bg-gray-900 w-full border-slate-300 dark:border-slate-300/20 rounded-md py-2 pl-3 pr-9 shadow-sm focus:border-indigo-300 focus:ring-indigo-200 focus:ring focus:ring-opacity-50",placeholder:"P 0.00",type:"number",name:"payment"},null,512),[[T,o.value]]),s("i",{onClick:e[4]||(e[4]=c(t=>o.value=null,["self"])),class:"bx bx-x-circle text-white/40 absolute text-xl inset-y-0 right-0 flex items-center pr-3 hover:text-red-500"})]),s("div",se,[s("button",{class:"p-2 text-xl font-bold text-gray-800 bg-white rounded-md active:scale-95",onClick:e[5]||(e[5]=t=>o.value+=50)},"50"),s("button",{class:"p-2 text-xl font-bold text-gray-800 bg-white rounded-md active:scale-95",onClick:e[6]||(e[6]=t=>o.value+=100)},"100"),s("button",{class:"p-2 text-xl font-bold text-gray-800 bg-white rounded-md active:scale-95",onClick:e[7]||(e[7]=t=>o.value+=200)},"200"),s("button",{class:"p-2 text-xl font-bold text-gray-800 bg-white rounded-md active:scale-95",onClick:e[8]||(e[8]=t=>o.value+=500)},"500"),s("button",{class:"p-2 font-bold text-gray-800 bg-white rounded-md active:scale-95",onClick:e[9]||(e[9]=t=>o.value+=1e3)},"1000")]),s("button",{class:"bg-white rounded-md w-full p-2 font-bold active:scale-[0.98]",onClick:e[10]||(e[10]=t=>o.value=a.value)},"Exact amount"),o.value>a.value?(i(),u("p",le,"Change: "+r(a.value&&o.value-a.value),1)):b("",!0),s("button",{class:M(["bg-white rounded-md w-full p-2 font-bold enabled:active:scale-[0.98] absolute bottom-0 right-0",{"opacity-50":a.value&&o.value<a.value}]),onClick:$,disabled:a.value&&o.value<a.value},"Place order",10,oe)])):b("",!0)]),h(B,{"max-width":"sm",show:v.value,onClose:e[11]||(e[11]=t=>v.value=!1)},{default:g(()=>[s("div",ne,r(x.value),1)]),_:1},8,["show"])],64))}});export{ue as default};
