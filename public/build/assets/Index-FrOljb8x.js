import{q as E,s as Q,r as j,m as Y,x as ee,o as u,f as c,b as t,l as te,g as ne,F as y,T as oe,a as p,w as O,u as x,Z as re,h as k,t as C,p as se,y as ae}from"./app-CKtilTwd.js";import{_ as G}from"./Modal-06x4BCuu.js";import{_ as I}from"./InputLabel-k8lfLbUU.js";import{_ as N}from"./TextInput-92ytKTaQ.js";function ie(e){var s=typeof e;return e!=null&&(s=="object"||s=="function")}var H=ie,le=typeof E=="object"&&E&&E.Object===Object&&E,de=le,ue=de,ce=typeof self=="object"&&self&&self.Object===Object&&self,fe=ue||ce||Function("return this")(),q=fe,me=q,pe=function(){return me.Date.now()},ve=pe,be=/\s/;function ge(e){for(var s=e.length;s--&&be.test(e.charAt(s)););return s}var xe=ge,_e=xe,he=/^\s+/;function ye(e){return e&&e.slice(0,_e(e)+1).replace(he,"")}var we=ye,ke=q,$e=ke.Symbol,X=$e,B=X,Z=Object.prototype,je=Z.hasOwnProperty,Se=Z.toString,$=B?B.toStringTag:void 0;function Te(e){var s=je.call(e,$),n=e[$];try{e[$]=void 0;var d=!0}catch{}var o=Se.call(e);return d&&(s?e[$]=n:delete e[$]),o}var Ee=Te,Oe=Object.prototype,Ce=Oe.toString;function Ie(e){return Ce.call(e)}var De=Ie,A=X,Ve=Ee,Ne=De,Le="[object Null]",Me="[object Undefined]",U=A?A.toStringTag:void 0;function ze(e){return e==null?e===void 0?Me:Le:U&&U in Object(e)?Ve(e):Ne(e)}var Fe=ze;function Ge(e){return e!=null&&typeof e=="object"}var Be=Ge,Ae=Fe,Ue=Be,Pe="[object Symbol]";function Re(e){return typeof e=="symbol"||Ue(e)&&Ae(e)==Pe}var We=Re,He=we,P=H,qe=We,R=NaN,Xe=/^[-+]0x[0-9a-f]+$/i,Ze=/^0b[01]+$/i,Je=/^0o[0-7]+$/i,Ke=parseInt;function Qe(e){if(typeof e=="number")return e;if(qe(e))return R;if(P(e)){var s=typeof e.valueOf=="function"?e.valueOf():e;e=P(s)?s+"":s}if(typeof e!="string")return e===0?e:+e;e=He(e);var n=Ze.test(e);return n||Je.test(e)?Ke(e.slice(2),n?2:8):Xe.test(e)?R:+e}var Ye=Qe,et=H,L=ve,W=Ye,tt="Expected a function",nt=Math.max,ot=Math.min;function rt(e,s,n){var d,o,m,v,f,g,h=0,S=!1,r=!1,a=!0;if(typeof e!="function")throw new TypeError(tt);s=W(s)||0,et(n)&&(S=!!n.leading,r="maxWait"in n,m=r?nt(W(n.maxWait)||0,s):m,a="trailing"in n?!!n.trailing:a);function i(l){var _=d,w=o;return d=o=void 0,h=l,v=e.apply(w,_),v}function b(l){return h=l,f=setTimeout(T,s),S?i(l):v}function D(l){var _=l-g,w=l-h,F=s-_;return r?ot(F,m-w):F}function M(l){var _=l-g,w=l-h;return g===void 0||_>=s||_<0||r&&w>=m}function T(){var l=L();if(M(l))return z(l);f=setTimeout(T,D(l))}function z(l){return f=void 0,a&&d?i(l):(d=o=void 0,v)}function J(){f!==void 0&&clearTimeout(f),h=0,d=g=o=f=void 0}function K(){return f===void 0?v:z(L())}function V(){var l=L(),_=M(l);if(d=arguments,o=this,g=l,_){if(f===void 0)return b(g);if(r)return clearTimeout(f),f=setTimeout(T,s),i(g)}return f===void 0&&(f=setTimeout(T,s)),v}return V.cancel=J,V.flush=K,V}var st=rt;const at=Q(st),it={key:0,class:"mt-4 pb-8 text-center"},lt=t("i",{class:"bx bx-loader-alt animate-spin text-3xl text-gray-800 dark:text-white/50"},null,-1),dt=[lt],ut={__name:"InfiniteScroll",props:{loadMore:Function},setup(e){const s=e,n=j(!1);let d=at(()=>{document.documentElement.offsetHeight-document.documentElement.scrollTop-(window.innerHeight??screen.height)<200&&!n.value&&(n.value=!0,s.loadMore().finally(()=>n.value=!1))},100);return Y(()=>{window.addEventListener("scroll",d)}),ee(()=>{window.removeEventListener("scroll",d)}),(o,m)=>(u(),c(y,null,[t("div",null,[te(o.$slots,"default")]),n.value?(u(),c("div",it,dt)):ne("",!0)],64))}},ct=t("title",null,`
            Expenses
        `,-1),ft={class:"max-w-7xl mx-auto py-8 px-6 lg:px-8 dark:text-white"},mt={class:"flex items-center mb-4"},pt=t("span",{class:"font-semibold mr-8"},"Expenses",-1),vt={key:0,class:"border dark:border-zinc-700 rounded-lg"},bt={class:"w-full table bg-white dark:bg-zinc-900 dark:text-white rounded-lg overflow-hidden"},gt=t("thead",{class:"text-left"},[t("tr",null,[t("th",{class:"px-4 py-2"},"Date"),t("th",{class:"px-4 py-2"},"Item"),t("th",{class:"px-4 py-2"},"Amount"),t("th",{class:"px-4 py-2"},"Deduct from")])],-1),xt={class:"dark:odd:bg-zinc-800 odd:bg-zinc-200"},_t={class:"px-4 py-2"},ht={class:"px-4 py-2 space-y-2"},yt={class:"px-4 py-2 space-y-2"},wt={class:"px-4 py-2 space-y-2"},kt={class:"px-4 py-2 space-y-2"},$t={class:"flex items-center space-x-2"},jt=["onClick"],St=["onClick"],Tt={key:1,class:"flex justify-center mt-14"},Et=t("div",{class:"flex justify-center items-center flex-col text-zinc-700 dark:text-zinc-400"},[t("i",{class:"bx bx-ghost text-7xl"}),t("p",null,"Oohh... It's empty in here.")],-1),Ot=[Et],Ct={class:"p-4"},It=t("span",{class:"dark:text-white font-bold"},"Edit Expense",-1),Dt=t("option",{value:"",selected:"",hidden:"",disabled:""},"Choose one",-1),Vt=t("option",{value:"Net"},"Net",-1),Nt=t("option",{value:"COGS"},"COGS",-1),Lt=[Dt,Vt,Nt],Mt={class:"flex mt-8 flex-row-reverse gap-4"},zt={class:"p-4 dark:text-white"},Ft=t("p",{class:"font-bold mb-2"},"Confirmation",-1),Gt=t("span",null,"Are you sure you want to delete?",-1),Bt={class:"flex mt-4 flex-row-reverse gap-4"},Wt={__name:"Index",props:{expenses:Object},setup(e){const n=j(e.expenses),d=j(!1),o=oe({created_at:"",type:"",item:"",amount:""}),m=j(!1),v=j(null),f=r=>{o.created_at=new Date(r.created_at).toLocaleDateString("sv-SE"),o.type=r.type,o.item=r.item,o.amount=r.amount,o.id=r.id,d.value=!0},g=()=>{o.put(route("expenses.update",o.id),{preserveScroll:!0,preserveState:r=>Object.keys(r.props.errors).length>0,onSuccess:r=>{Object.keys(r.props.errors).length===1&&o.reset()}})},h=r=>{v.value=r,m.value=!0},S=()=>n.value.next_page_url?axios.get(n.value.next_page_url).then(r=>{console.log(r.data),n.value={...r.data,data:{...n.value.data,...r.data.data}}}):Promise.resolve();return(r,a)=>(u(),c(y,null,[p(x(re),null,{default:O(()=>[ct]),_:1}),t("div",ft,[t("div",mt,[pt,t("i",{onClick:a[0]||(a[0]=i=>r.$inertia.get(r.route("expenses.create"))),class:"bx bx-plus rounded-full hover:bg-black/20 dark:hover:bg-white/20 w-8 h-8 inline-flex justify-center items-center duration-200 ease-in-out"})]),Object.keys(n.value.data).length?(u(),c("div",vt,[p(ut,{"load-more":S},{default:O(()=>[t("table",bt,[gt,t("tbody",null,[(u(!0),c(y,null,k(Object.keys(n.value.data),i=>(u(),c("tr",xt,[t("td",_t,C(i),1),t("td",ht,[(u(!0),c(y,null,k(n.value.data[i],b=>(u(),c("p",null,C(b.item),1))),256))]),t("td",yt,[(u(!0),c(y,null,k(n.value.data[i],b=>(u(),c("p",null,C(b.amount),1))),256))]),t("td",wt,[(u(!0),c(y,null,k(n.value.data[i],b=>(u(),c("p",null,C(b.type),1))),256))]),t("td",kt,[(u(!0),c(y,null,k(n.value.data[i],b=>(u(),c("div",$t,[t("i",{onClick:D=>f(b),class:"bx bx-edit w-6 h-6 inline-flex justify-center items-center bg-green-500 hover:bg-green-600 active:bg-green-800 duration-200 ease-in-out rounded-full"},null,8,jt),t("i",{onClick:D=>h(b),class:"bx bx-trash w-6 h-6 inline-flex justify-center items-center bg-red-500 hover:bg-red-600 active:bg-red-800 duration-200 ease-in-out rounded-full"},null,8,St)]))),256))])]))),256))])])]),_:1})])):(u(),c("div",Tt,Ot))]),p(G,{show:d.value,onClose:a[6]||(a[6]=i=>d.value=!1),"max-width":"md"},{default:O(()=>[t("div",Ct,[It,p(I,{value:"Date",for:"editExpenseData.created_at",class:"mt-4"}),p(N,{type:"date",id:"editExpenseData.created_at",class:"w-full mt-2",modelValue:x(o).created_at,"onUpdate:modelValue":a[1]||(a[1]=i=>x(o).created_at=i)},null,8,["modelValue"]),p(I,{value:"Item",class:"mt-4"}),p(N,{type:"text",class:"w-full mt-2",modelValue:x(o).item,"onUpdate:modelValue":a[2]||(a[2]=i=>x(o).item=i)},null,8,["modelValue"]),p(I,{value:"Amount",class:"mt-4"}),p(N,{type:"text",class:"w-full mt-2",modelValue:x(o).amount,"onUpdate:modelValue":a[3]||(a[3]=i=>x(o).amount=i)},null,8,["modelValue"]),p(I,{value:"Deduct from",class:"mt-4"}),se(t("select",{"onUpdate:modelValue":a[4]||(a[4]=i=>x(o).type=i),id:"categories",class:"w-full mt-2 border-zinc-300 dark:border-zinc-700 dark:bg-zinc-900 dark:text-zinc-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm"},Lt,512),[[ae,x(o).type]]),t("div",Mt,[t("button",{onClick:g,class:"px-8 py-2 text-white text-sm bg-green-500 hover:bg-green-600 active:bg-green-800 duration-200 ease-in-out rounded-lg"},"Save"),t("button",{onClick:a[5]||(a[5]=i=>d.value=!1),class:"dark:text-white text-sm hover:underline"},"Cancel")])])]),_:1},8,["show"]),p(G,{show:m.value,onClose:a[9]||(a[9]=i=>m.value=!1),"max-width":"md"},{default:O(()=>[t("div",zt,[Ft,Gt,t("div",Bt,[t("button",{onClick:a[7]||(a[7]=i=>r.$inertia.delete(r.route("expenses.destroy",v.value),{onSuccess:()=>{m.value=!1,v.value=null}})),class:"px-8 py-2 text-white text-sm bg-red-500 hover:bg-red-600 active:bg-red-800 duration-200 ease-in-out rounded-lg"},"Delete"),t("button",{onClick:a[8]||(a[8]=i=>m.value=!1),class:"dark:text-white text-sm hover:underline"},"Cancel")])])]),_:1},8,["show"])],64))}};export{Wt as default};
