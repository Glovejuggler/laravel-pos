import{o as i,f as r,b as e,t,F as b,h as $,r as d,T as L,z as M,x as q,a as _,w as y,u as p,g as w,d as x,Z as B,q as R,O as D}from"./app-xOyRp-ns.js";import{_ as F}from"./Modal-LUPm6GlR.js";import{Z as E}from"./index-CbjWbaYu.js";const H={class:"w-64 bg-white pb-6 z-10"},P=e("div",{class:"flex justify-center"},[e("img",{src:"logo.jpg",class:"w-32",alt:""})],-1),G={class:"grid grid-cols-2"},V={class:"text-right"},Q={class:"grid grid-cols-2"},Z=e("b",null,"Type",-1),U={class:"text-right"},W=e("hr",{class:"border-black mt-2"},null,-1),K=e("div",{class:"flex justify-between"},[e("p",null,"Item"),e("p",null,"Subtotal")],-1),X=e("hr",{class:"border-black mb-2"},null,-1),Y={class:"flex justify-between pl-4 w-full"},J={class:"w-full"},ee=e("hr",{class:"border-black my-2"},null,-1),te={class:"font-bold text-lg flex justify-between"},se=e("p",null,"TOTAL",-1),le={class:"pl-4"},ne=e("hr",{class:"border-black my-2"},null,-1),oe=e("div",{class:"flex justify-center"},[e("p",null,"Thank you. Come again.")],-1),ae={class:"flex justify-between text-sm"},ie=e("p",null,"Cashier",-1),re={class:"flex justify-between text-sm"},ce=e("p",null,"Order ID",-1),de={class:"text-right"},ue={class:"flex justify-between text-sm"},he=e("p",{class:"w-max"},"Order Time",-1),pe={class:"w-max"},me=e("div",{class:"flex flex-col items-center justify-center text-sm mt-2 w-full"},[e("b",null,"UPTop Diner"),e("p",null,"25 L. Geirosa Ave., Brgy. Silangan"),e("p",null,"Calauan, Laguna"),e("p",null,"La Famiglia Building 2nd Floor")],-1),fe=e("hr",{class:"border-black my-2"},null,-1),_e=e("p",null,"THIS IS NOT AN OFFICIAL RECEIPT",-1),xe={__name:"Receipt",props:{receipt:{type:Object,required:!0}},setup(l){return(u,k)=>(i(),r("div",H,[P,e("div",G,[e("p",null,t(l.receipt.name??" "),1),e("p",V,t(`Order #${l.receipt.number}`),1)]),e("div",Q,[Z,e("b",U,t(l.receipt.type),1)]),W,K,X,e("div",null,[(i(!0),r(b,null,$(l.receipt.items,c=>(i(),r("div",null,[e("p",null,t(c.name),1),e("div",Y,[e("p",J,t(Number(c.price).amountFormat())+" x"+t(c.quantity),1),e("p",null,t((c.quantity*c.price).amountFormat()),1)])]))),256)),ee,e("div",null,[e("div",te,[se,e("p",null,t(l.receipt.gross.amountFormat()),1)]),e("div",le,[e("p",null,"CASH: "+t(Number(l.receipt.payment).amountFormat()),1),e("p",null,"CHANGE: "+t((l.receipt.payment-l.receipt.gross).amountFormat()),1)])]),ne,oe,e("div",ae,[ie,e("p",null,t(u.$page.props.auth.user.name),1)]),e("div",re,[ce,e("p",de,t(`dQw4w9WgXcQ${l.receipt.id.pad(4)}`),1)]),e("div",ue,[he,e("p",pe,t(Intl.DateTimeFormat("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"numeric",hour12:!0}).format(new Date(l.receipt.created_at))),1)]),me,fe,_e])]))}},be=e("title",null,`
            Sales
        `,-1),ge={class:"max-w-7xl mx-auto px-6 py-8 lg:px-8 z-50"},ve={class:"flex space-x-2 items-center mb-4"},ye={class:"dark:text-white font-semibold"},we={key:0,class:"w-full rounded-lg dark:bg-zinc-800 bg-white dark:text-white p-4 flex flex-col"},$e={key:1,class:"dark:text-white w-full bg-white dark:bg-zinc-800 text-left text-sm rounded-lg overflow-hidden mt-4"},ke=e("thead",null,[e("tr",null,[e("th",{class:"p-4"},"Customer"),e("th",{class:"p-4"},"Time"),e("th",{class:"p-4"},"Order Type"),e("th",{class:"p-4"},"Orders"),e("th",{class:"p-4"},"Quantity"),e("th",{class:"p-4"},"Gross Sales"),e("th",{class:"p-4"},"Net Income"),e("th",{class:"p-4"},"Actions")])],-1),Ce={class:"bg-white dark:bg-zinc-800 border-b border-zinc-700"},je={class:"px-4 py-2"},De={class:"px-4 py-2"},Fe={class:"text-xs opacity-70"},Te={class:"px-4 py-2"},Se={class:"px-4 py-2"},Oe={class:"px-4 py-2"},ze={class:"px-4 py-2"},Ie={class:"px-4 py-2"},Ne={class:"px-4 py-2"},Ae={class:"flex space-x-2"},Le=["onClick"],Me=["onClick"],qe={class:"bg-white font-bold dark:bg-zinc-800"},Be={class:"px-4 py-2"},Re=e("td",{class:"px-4 py-2"},null,-1),Ee=e("td",{class:"px-4 py-2"},null,-1),He=e("td",{class:"px-4 py-2"},null,-1),Pe=e("td",{class:"px-4 py-2"},null,-1),Ge={class:"px-4 py-2"},Ve={class:"px-4 py-2"},Qe=e("td",{class:"px-4 py-2"},null,-1),Ze={key:2,class:"flex justify-center mt-14"},Ue=e("div",{class:"flex justify-center items-center flex-col text-zinc-700 dark:text-zinc-400"},[e("i",{class:"bx bx-ghost text-7xl"}),e("p",null,"Oohh... It's empty in here.")],-1),We=[Ue],Ke={class:"dark:text-white p-6"},Xe=e("p",{class:"font-bold"},"Confirmation",-1),Ye=e("p",{class:"mt-4"},"This transaction record will be deleted. Enter the code to continue.",-1),Je={class:"flex justify-center mt-4 font-bold tracking-wider text-4xl"},et={class:"dark:text-white p-4"},tt=e("p",{class:"font-bold"},"Confirmation",-1),st=e("p",{class:"mt-4"},"Print this receipt?",-1),lt={class:"mt-4 grid grid-cols-2 gap-2"},nt={key:0,class:"fixed top-0 -left-96"},rt={__name:"Sales",props:{transactions:Object,filters:Object,total:Object,batchDates:Boolean},setup(l){const u=l,k=(o,n)=>{const s=Math.ceil(o),a=Math.floor(n);return Math.floor(Math.random()*(a-s+1)+s)},c=d(!1),C=d(null),g=d(""),v=d(null),T=o=>{C.value=o,g.value=k(1e5,999999),c.value=!0,R(()=>v.value.focus())},S=o=>{o==g.value&&D.delete(route("order.cancel",C.value.id),{onStart:()=>v.value.disabled=!0,onSuccess:()=>c.value=!1})},h=u.filters.date?new Date(u.filters.date):new Date,O=h<new Date(new Date().setHours(0,0,0,0)),z=L({search:u.filters.search,date:u.filters.date});M(z,o=>{D.get(route("sales"),o,{preserveState:!0,preserveScroll:!0,replace:!0})},{deep:!0});const I=a=>{var a=parseInt(a,10),n=Math.floor(a/3600),s=Math.floor((a-n*3600)/60),a=a-n*3600-s*60;return n?s?`${n}h ${s}m ${a}s`:`${n}h ${a}s`:s?`${s}m ${a}s`:`${a}s`},j=d(!1);q(()=>{let o=navigator.userAgent.toLowerCase();j.value=o.indexOf("android")>-1});const m=d(!1),f=d(null),N=o=>{f.value=o,m.value=!0},A=()=>{const o=document.getElementById("receipt");E(o,{quality:1,scale:2}).then(n=>{console.log(n),j.value&&(window.location.href="rawbt:"+n)}).finally(()=>{m.value=!1,f.value=null})};return(o,n)=>(i(),r(b,null,[_(p(B),null,{default:y(()=>[be]),_:1}),e("div",ge,[e("div",ve,[e("i",{onClick:n[0]||(n[0]=s=>o.$inertia.get(o.route("sales"),{date:new Date(p(h).setDate(p(h).getDate()-1)).toLocaleDateString("en-PH")})),class:"bx bxs-chevron-left dark:text-white hover:bg-white hover:text-zinc-900 w-6 h-6 inline-flex justify-center items-center rounded-full border dark:border-white"}),e("p",ye,t(p(h).toWordFormat()),1),O?(i(),r("i",{key:0,onClick:n[1]||(n[1]=s=>o.$inertia.get(o.route("sales"),{date:new Date(p(h).setDate(p(h).getDate()+1)).toLocaleDateString("en-PH")})),class:"bx bxs-chevron-right dark:text-white hover:bg-white hover:text-zinc-900 w-6 h-6 inline-flex justify-center items-center rounded-full border dark:border-white"})):w("",!0)]),l.transactions.length?(i(),r("div",we,[e("span",null,[x("Total Orders: "),e("b",null,t(l.transactions.length),1)]),e("span",null,[x("Gross Sales: "),e("b",null,t(l.total.gross.amountFormat()),1)]),e("span",null,[x("Net Income: "),e("b",null,t((l.total.gross-l.total.cost).amountFormat()),1)])])):w("",!0),l.transactions.length?(i(),r("table",$e,[ke,e("tbody",null,[(i(!0),r(b,null,$(l.transactions,s=>(i(),r("tr",Ce,[e("td",je,t(s.name??`#${s.number}`),1),e("td",De,[x(t(new Date(s.created_at).toTimeFormat())+" ",1),e("span",Fe,t(I(s.elapsed)),1)]),e("td",Te,t(s.type),1),e("td",Se,[e("div",null,[(i(!0),r(b,null,$(s.items,a=>(i(),r("p",null,t(`${a.name} x${a.quantity}`),1))),256))])]),e("td",Oe,t(s.quantity),1),e("td",ze,t(s.gross.amountFormat()),1),e("td",Ie,t((s.gross-s.cost).amountFormat()),1),e("td",Ne,[e("div",Ae,[e("i",{onClick:a=>N(s),class:"bx bx-printer dark:text-white inline-flex justify-center items-center p-2 rounded-full bg-green-500 hover:bg-green-700 active:bg-green-900 duration-200 ease-in-out cursor-pointer"},null,8,Le),e("i",{onClick:a=>T(s),class:"bx bx-trash dark:text-white inline-flex justify-center items-center p-2 rounded-full bg-red-500 hover:bg-red-700 active:bg-red-900 duration-200 ease-in-out cursor-pointer"},null,8,Me)])])]))),256)),e("tr",qe,[e("td",Be,t(l.transactions.length),1),Re,Ee,He,Pe,e("td",Ge,t(l.total.gross.amountFormat()),1),e("td",Ve,t((l.total.gross-l.total.cost).amountFormat()),1),Qe])])])):(i(),r("div",Ze,We))]),_(F,{show:c.value,"max-width":"md",onClose:n[3]||(n[3]=s=>c.value=!1)},{default:y(()=>[e("div",Ke,[Xe,Ye,e("div",Je,t(g.value),1),e("input",{ref_key:"codeInput",ref:v,onKeyup:n[2]||(n[2]=s=>S(s.target.value)),class:"bg-zinc-900 w-full rounded-lg mt-2 disabled:opacity-50",type:"text"},null,544)])]),_:1},8,["show"]),_(F,{show:m.value,onClose:n[5]||(n[5]=s=>m.value=!1)},{default:y(()=>[e("div",et,[tt,st,e("div",lt,[e("button",{onClick:A,class:"bg-green-500 rounded-lg py-2 hover:bg-green-600 active:bg-green-800 duration-200 ease-in-out"},"Yes"),e("button",{onClick:n[4]||(n[4]=s=>m.value=!1),class:"bg-zinc-500 rounded-lg py-2 hover:bg-zinc-600 active:bg-zinc-900 duration-200 ease-in-out"},"Cancel")])])]),_:1},8,["show"]),f.value?(i(),r("div",nt,[_(xe,{receipt:f.value,id:"receipt"},null,8,["receipt"])])):w("",!0)],64))}};export{rt as default};
