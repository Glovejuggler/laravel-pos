import{r as c,m as B,o,f as a,b as t,t as g,g as z,n as O,F as k,h as D,C as L,D as R,a as C,w as b,u as E,c as $,E as I,Z as S,G as F}from"./app-bx6r09WD.js";import{_ as j}from"./Modal-B8EYgpVm.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const A={key:0,class:"bg-zinc-800 rounded-lg p-4 ease-in-out duration-200 transition-all relative text-white h-min"},K={class:"flex justify-between"},G={class:"text-xs"},Y={key:0},q=["onClick"],P={key:0,class:"my-4 rounded-md p-3 bg-zinc-900 text-zinc-200"},U={class:"flex justify-between space-x-2 mt-2"},Z=["disabled"],H={key:1,class:"bg-zinc-800 rounded-lg p-4 ease-in-out duration-200 transition-all text-white h-min"},J={__name:"OrderCard",props:{data:{type:Object},id:{type:Number}},emits:["remove","finish"],setup(y,{emit:x}){const p=y,w=x,n=c(null),f=c(!1);B(()=>{p.id&&(f.value=!0,axios.get(route("order.get",p.id)).then(d=>{d.data.items.forEach(m=>m.done=!1),n.value=d.data}).finally(()=>{f.value=!1}))});const r=()=>{w("remove")},h=()=>{w("finish")};return(d,m)=>!f.value&&n.value?(o(),a("div",A,[t("div",K,[t("div",null,[t("p",G,g(Intl.DateTimeFormat("en-US",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"}).format(new Date(n.value.created_at))),1),n.value.name?(o(),a("p",Y,"Customer: "+g(n.value.name),1)):z("",!0)]),t("span",{class:O(["rounded-full px-5 border text-lg font-bold h-min",n.value.type==="Dine-in"?"bg-green-500 border-green-950 text-green-950":"bg-red-500 border-red-950 text-red-950"])},g(n.value.type),3)]),(o(!0),a(k,null,D(n.value.items,i=>(o(),a("p",{class:O(["rounded-lg p-2 bg-zinc-700 mt-2",{"opacity-50 line-through":i.done}]),onClick:u=>i.done=!i.done},g(`${i.name} x${i.quantity}`),11,q))),256)),n.value.note?(o(),a("div",P,g(n.value.note),1)):z("",!0),t("div",U,[t("button",{onClick:r,class:"p-2 bg-red-500 rounded-2xl text-white text-xs w-full"},"Cancel"),t("button",{onClick:h,class:"p-2 bg-blue-500 rounded-2xl text-white text-xs w-full disabled:opacity-25 disabled:cursor-not-allowed",disabled:!n.value.items.every(i=>i.done)},"Done",8,Z)])])):(o(),a("div",H,[...m[0]||(m[0]=[L('<p class="h-3 w-32 rounded-full bg-zinc-600 mb-2 animate-pulse"></p><p class="h-28 rounded-lg bg-zinc-600 animate-pulse"></p><div class="flex justify-between space-x-2 mt-2"><div class="h-8 rounded-2xl bg-zinc-600 animate-pulse w-full"></div><div class="h-8 rounded-2xl bg-zinc-600 animate-pulse w-full"></div></div>',3)])]))}},Q={class:"bg-zinc-950 min-h-screen"},W={key:1,class:"min-h-screen w-full flex justify-center items-center text-zinc-400"},X={class:"flex flex-col"},ee=["src"],te=Object.assign({layout:null},{__name:"Kitchen",props:{orders:Object},setup(y){const x=(s,e)=>{const l=Math.ceil(s),v=Math.floor(e);return Math.floor(Math.random()*(v-l+1)+l)},p=c(x(1,14)),n=c(y.orders);R(n.value,()=>{n.value.length===0&&(p.value=x(1,14))});const f=new Audio("../genshin_mail.mp3");Echo.private("kitchen").listen("OrderPlaced",s=>{n.value?n.value.push(s.order):n.value=[s.order],f.play()}).listen("OrderDone",s=>{n.value.splice(n.value.findIndex(e=>e==s.order),1)});const r=c({index:"",order:""}),h=c(!1),d=c(!1),m=(s,e)=>{r.value.index=s,r.value.order=e,h.value=!0},i=(s,e)=>{r.value.index=s,r.value.order=e,d.value=!0},u=()=>{h.value=!1,d.value=!1},M=()=>{u(),F.delete(route("order.cancel",r.value.order)).then(s=>console.log(s.data))},N=()=>{u(),F.delete(route("order.done",r.value.order)).then(s=>console.log(s.data))},T=s=>{const{marginLeft:e,marginTop:l,width:v,height:_}=window.getComputedStyle(s);s.style.left=`${s.offsetLeft-parseFloat(e,10)}px`,s.style.top=`${s.offsetTop-parseFloat(l,10)}px`,s.style.width=v,s.style.height=_};return(s,e)=>(o(),a(k,null,[C(E(S),null,{default:b(()=>[...e[0]||(e[0]=[t("title",null,`
            Kitchen
        `,-1)])]),_:1}),t("div",Q,[n.value.length?(o(),$(I,{key:0,tag:"div",name:"list",onBeforeLeave:T,class:"grid sm:grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-6 p-4"},{default:b(()=>[(o(!0),a(k,null,D(n.value,(l,v)=>(o(),a("div",{key:l},[(o(),$(J,{id:l,key:l,onRemove:_=>m(v,l),onFinish:_=>i(v,l)},null,8,["id","onRemove","onFinish"]))]))),128))]),_:1})):(o(),a("div",W,[t("div",X,[t("img",{class:"max-w-32 max-h-32",src:`../empty/${p.value}.png`,alt:""},null,8,ee),e[1]||(e[1]=t("p",{class:"text-zinc-400"},"Nothing in here...",-1))])]))]),C(j,{show:h.value,onClose:u,"max-width":"md"},{default:b(()=>[t("div",{class:"p-6 bg-zinc-800 text-white"},[e[2]||(e[2]=t("b",null,"Confirmation",-1)),e[3]||(e[3]=t("p",{class:"mt-2"},"Are you sure you want to cancel this order?",-1)),e[4]||(e[4]=t("p",{class:"text-sm"},"This action cannot be undone.",-1)),t("div",{class:"flex justify-end space-x-4"},[t("button",{onClick:u,class:"hover:underline"},"No"),t("button",{onClick:M,class:"bg-red-500 hover:bg-red-700 active:bg-red-900 duration-200 ease-in-out px-2 py-1 rounded-lg text-sm"},"Yes")])])]),_:1},8,["show"]),C(j,{show:d.value,onClose:u,"max-width":"md"},{default:b(()=>[t("div",{class:"p-6 bg-zinc-800 text-white"},[e[5]||(e[5]=t("b",null,"Confirmation",-1)),e[6]||(e[6]=t("p",{class:"mt-2"},"Are you sure this order is already done?",-1)),e[7]||(e[7]=t("p",{class:"text-sm"},"This action cannot be undone.",-1)),t("div",{class:"flex justify-end space-x-4"},[t("button",{onClick:u,class:"hover:underline"},"No"),t("button",{onClick:N,class:"bg-red-500 hover:bg-red-700 active:bg-red-900 duration-200 ease-in-out px-2 py-1 rounded-lg text-sm"},"Yes")])])]),_:1},8,["show"])],64))}}),le=V(te,[["__scopeId","data-v-bf8f4ee6"]]);export{le as default};
