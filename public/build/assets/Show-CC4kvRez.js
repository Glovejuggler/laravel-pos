import{T as F,k as U,r as x,o as r,f as d,a as i,w as I,u as n,b as o,t as p,g as y,p as h,y as S,F as u,h as f,z as D,A as O,e as L,Z as P}from"./app-B0JG0f3t.js";import{_ as m}from"./InputLabel-CgnUbMJT.js";import{_ as g}from"./TextInput-Dhu2vAGI.js";import{_ as R}from"./Modal-CDzRn7Hv.js";import{c as V}from"./colors-h6fGm1A9.js";const T={class:"max-w-screen-lg mx-auto py-8"},E={class:"dark:text-white mb-8"},Z={class:"lg:grid grid-cols-3 gap-4"},q={key:0,class:"absolute inset-0 flex justify-center items-center bg-black/40 group-hover:opacity-100 opacity-0 duration-200 ease-in-out"},G={key:1,class:"bx bx-plus font-bold text-3xl dark:text-white"},H=["src"],J={class:"flex mt-2"},K=["value"],Q={class:"flex mt-4 items-center space-x-2"},W={class:"col-span-2 p-6 rounded-lg bg-white dark:bg-zinc-800"},X=["selected"],Y=["value","selected"],_={class:"grid grid-cols-3 gap-1"},ee=["onClick"],te={class:"flex justify-end py-8 space-x-8"},oe={class:"p-4 dark:text-white"},le={class:"mt-4 flex justify-end space-x-2"},ne={id:"costings"},se=["value"],me={__name:"Show",props:{item:Object,categories:Object,suggestions:Object},setup(s){const M=Object.keys(V).filter(a=>typeof V[a]=="object"),c=s,l=F({category_id:c.item.category_id,image:"",name:c.item.name,price:c.item.price,color:c.item.color,menu:c.item.menu,breakdown:c.item.costing}),w=U(()=>l.breakdown.reduce((a,e)=>a+Number(e.cost),0)),C=U(()=>(Number(l.price)-w.value).toFixed(2)),z=x(l.color),$=x(null),j=x(null),B=()=>{if(l.image){let a=new FileReader;a.readAsDataURL(l.image),a.onload=e=>{j.value=e.target.result}}},N=()=>{l.breakdown.push({name:"",cost:""})},A=a=>{l.breakdown.splice(a,1)},v=x(!1);return(a,e)=>(r(),d(u,null,[i(n(P),null,{default:I(()=>[o("title",null,`
            `+p(s.item.name)+`
        `,1)]),_:1}),o("div",T,[o("p",E,p(s.item.name),1),o("div",Z,[o("div",null,[o("div",{onClick:e[0]||(e[0]=t=>$.value.click()),class:"h-72 w-72 rounded-lg overflow-hidden bg-white dark:bg-zinc-700 flex justify-center items-center relative group"},[s.item.pic?(r(),d("div",q,[...e[16]||(e[16]=[o("i",{class:"bx bx-photo-album text-5xl text-white p-3 rounded-full"},null,-1)])])):y("",!0),!n(l).image&&!s.item.pic?(r(),d("i",G)):y("",!0),n(l).image||s.item.pic?(r(),d("img",{key:2,src:j.value||`../../storage/${s.item.pic}`,class:"w-72 h-72 object-cover",alt:""},null,8,H)):y("",!0)]),i(m,{class:"mt-4",for:"color",value:"Color"}),o("div",J,[h(o("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>n(l).color=t),id:"color",name:"color",onChange:e[2]||(e[2]=t=>z.value=t.target.value),class:"rounded-lg border border-zinc-300 dark:border-zinc-700 dark:bg-zinc-900 dark:text-white"},[(r(!0),d(u,null,f(n(M),t=>(r(),d(u,null,[(r(!0),d(u,null,f(n(V)[t],b=>(r(),d("option",{style:D(`background: ${b} !important`),value:b},p(b),13,K))),256))],64))),256))],544),[[S,n(l).color]]),o("div",{class:"w-10 h-10 ml-4",style:D(`background-color: ${z.value} !important`)},null,4)]),o("div",Q,[h(o("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>n(l).menu=t),class:"w-4 h-4 text-blue-600 bg-zinc-100 border-zinc-300 rounded-sm focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-zinc-800 focus:ring-2 dark:bg-zinc-700 dark:border-zinc-600 appearance-none",type:"checkbox",name:"showInMenu",id:"showInMenu"},null,512),[[O,n(l).menu]]),i(m,{for:"showInMenu",value:"Show in menu"})])]),o("div",W,[o("form",{onSubmit:e[10]||(e[10]=L(t=>n(l).post(a.route("items.update",s.item)),["prevent"])),enctype:"multipart/form-data"},[o("input",{ref_key:"newImage",ref:$,onInput:e[4]||(e[4]=t=>n(l).image=t.target.files[0]),onChange:B,type:"file",accept:"image/*",hidden:""},null,544),i(m,{for:"categories",value:"Category"}),h(o("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>n(l).category_id=t),id:"categories",class:"w-full mt-2 border-zinc-300 dark:border-zinc-700 dark:bg-zinc-900 dark:text-zinc-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm"},[o("option",{hidden:"",disabled:"",selected:s.item.category_id===69420},"Select category",8,X),(r(!0),d(u,null,f(s.categories,t=>(r(),d("option",{value:t.id,selected:s.item.category_id===t.id},p(t.name),9,Y))),256))],512),[[S,n(l).category_id]]),i(m,{class:"mt-4",for:"name",value:"Name"}),i(g,{id:"name",type:"text",modelValue:n(l).name,"onUpdate:modelValue":e[6]||(e[6]=t=>n(l).name=t),class:"mt-2 w-full block"},null,8,["modelValue"]),o("div",_,[o("div",null,[i(m,{class:"mt-4",for:"price",value:"Price"}),i(g,{id:"price",type:"number",modelValue:n(l).price,"onUpdate:modelValue":e[7]||(e[7]=t=>n(l).price=t),class:"mt-2 w-full block"},null,8,["modelValue"])]),o("div",null,[i(m,{class:"mt-4",for:"cost",value:"Cost"}),i(g,{disabled:"",id:"cost",type:"number",modelValue:w.value,"onUpdate:modelValue":e[8]||(e[8]=t=>w.value=t),class:"mt-2 w-full block disabled:bg-zinc-700"},null,8,["modelValue"])]),o("div",null,[i(m,{class:"mt-4",for:"profit",value:"Profit"}),i(g,{disabled:"",id:"profit",type:"number",modelValue:C.value,"onUpdate:modelValue":e[9]||(e[9]=t=>C.value=t),class:"mt-2 w-full block disabled:bg-zinc-700"},null,8,["modelValue"])])]),e[17]||(e[17]=o("p",{class:"block font-medium text-sm text-zinc-700 dark:text-zinc-300 mt-4 select-none"},"Breakdown of cost",-1)),(r(!0),d(u,null,f(n(l).breakdown,(t,b)=>(r(),d("div",{key:b,class:"grid grid-cols-11 gap-2 m-2"},[i(g,{list:"costings",type:"text",modelValue:t.name,"onUpdate:modelValue":k=>t.name=k,class:"w-full block col-span-5",placeholder:"Item"},null,8,["modelValue","onUpdate:modelValue"]),i(g,{type:"number",modelValue:t.cost,"onUpdate:modelValue":k=>t.cost=k,class:"w-full block col-span-5",placeholder:"Cost"},null,8,["modelValue","onUpdate:modelValue"]),o("i",{onClick:k=>A(b),class:"bx bx-x p-2 w-8 h-8 rounded-lg text-white bg-red-500 hover:bg-red-700 duration-200 ease-in-out inline-flex justify-center items-center"},null,8,ee)]))),128)),o("button",{type:"button",class:"text-xs px-4 py-1 rounded-lg bg-zinc-400 text-white",onClick:N},"Add"),e[18]||(e[18]=o("div",{class:"flex justify-end"},[o("button",{"type-":"submit",class:"rounded-lg px-4 py-2 bg-green-500 hover:bg-green-700 active:bg-green-900 text-white text-sm duration-200 ease-in-out"},"Save")],-1))],32)])]),o("div",te,[o("button",{onClick:e[11]||(e[11]=t=>a.$inertia.get(a.route("items.create",{duplicate:s.item.id,category:s.item.category_id}))),type:"button",class:"text-blue-500 border border-blue-500 px-4 hover:bg-blue-500 hover:text-white rounded-lg text-sm"},"Duplicate"),o("button",{onClick:e[12]||(e[12]=t=>v.value=!0),type:"button",class:"text-red-500 border border-red-500 px-4 hover:bg-red-500 hover:text-white rounded-lg text-sm"},"Delete")])]),i(R,{show:v.value,onClose:e[15]||(e[15]=t=>v.value=!1),"max-width":"md"},{default:I(()=>[o("div",oe,[e[19]||(e[19]=o("p",{class:"font-bold"},"Confirmation",-1)),o("p",null,"Are you sure you want to delete "+p(s.item.name)+"?",1),o("div",le,[o("button",{onClick:e[13]||(e[13]=t=>v.value=!1),class:"dark:text-white hover:underline"},"Cancel"),o("button",{onClick:e[14]||(e[14]=t=>a.$inertia.delete(a.route("items.destroy",s.item))),class:"bg-red-500 hover:bg-red-700 active:bg-red-900 duration-200 ease-in-out px-3 py-1 text-white rounded-lg"},"Delete")])])]),_:1},8,["show"]),o("datalist",ne,[(r(!0),d(u,null,f(s.suggestions,t=>(r(),d("option",{value:t},null,8,se))),256))])],64))}};export{me as default};
