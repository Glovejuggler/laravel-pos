import{T as A,k as j,r as w,o as a,f as d,a as s,w as U,u as n,b as t,t as p,g as y,p as h,y as I,F as u,h as f,z as S,A as F,e as O,Z as L}from"./app-CwN049UX.js";import{_ as c}from"./InputLabel-BdMzTB9r.js";import{_ as b}from"./TextInput-BTwSGPYQ.js";import{_ as P}from"./Modal-CO4ygNEF.js";import{c as V}from"./colors-BREPTA6W.js";const R={class:"max-w-screen-lg mx-auto py-8"},T={class:"dark:text-white mb-8"},E={class:"lg:grid grid-cols-3 gap-4"},Z={key:0,class:"absolute inset-0 flex justify-center items-center bg-black/40 group-hover:opacity-100 opacity-0 duration-200 ease-in-out"},q=t("i",{class:"bx bx-photo-album text-5xl text-white p-3 rounded-full"},null,-1),G=[q],H={key:1,class:"bx bx-plus font-bold text-3xl dark:text-white"},J=["src"],K={class:"flex mt-2"},Q=["value"],W={class:"flex mt-4 items-center space-x-2"},X={class:"col-span-2 p-6 rounded-lg bg-white dark:bg-zinc-800"},Y=["selected"],ee=["value","selected"],te={class:"grid grid-cols-3 gap-1"},oe=t("p",{class:"block font-medium text-sm text-zinc-700 dark:text-zinc-300 mt-4 select-none"},"Breakdown of cost",-1),le=["onClick"],ne=t("div",{class:"flex justify-end"},[t("button",{"type-":"submit",class:"rounded-lg px-4 py-2 bg-green-500 hover:bg-green-700 active:bg-green-900 text-white text-sm duration-200 ease-in-out"},"Save")],-1),se={class:"flex justify-end py-8"},ie={class:"p-4 dark:text-white"},ae=t("p",{class:"font-bold"},"Confirmation",-1),de={class:"mt-4 flex justify-end space-x-2"},re={id:"costings"},ue=["value"],fe={__name:"Show",props:{item:Object,categories:Object,suggestions:Object},setup(i){const M=Object.keys(V).filter(r=>typeof V[r]=="object"),m=i,l=A({category_id:m.item.category_id,image:"",name:m.item.name,price:m.item.price,color:m.item.color,menu:m.item.menu,breakdown:m.item.costing}),x=j(()=>l.breakdown.reduce((r,o)=>r+Number(o.cost),0)),z=j(()=>(Number(l.price)-x.value).toFixed(2)),C=w(l.color),$=w(null),_=w(null),B=()=>{if(l.image){let r=new FileReader;r.readAsDataURL(l.image),r.onload=o=>{_.value=o.target.result}}},D=()=>{l.breakdown.push({name:"",cost:""})},N=r=>{l.breakdown.splice(r,1)},v=w(!1);return(r,o)=>(a(),d(u,null,[s(n(L),null,{default:U(()=>[t("title",null,`
            `+p(i.item.name)+`
        `,1)]),_:1}),t("div",R,[t("p",T,p(i.item.name),1),t("div",E,[t("div",null,[t("div",{onClick:o[0]||(o[0]=e=>$.value.click()),class:"h-72 w-72 rounded-lg overflow-hidden bg-white dark:bg-zinc-700 flex justify-center items-center relative group"},[i.item.pic?(a(),d("div",Z,G)):y("",!0),!n(l).image&&!i.item.pic?(a(),d("i",H)):y("",!0),n(l).image||i.item.pic?(a(),d("img",{key:2,src:_.value||`../../storage/${i.item.pic}`,class:"w-72 h-72 object-cover",alt:""},null,8,J)):y("",!0)]),s(c,{class:"mt-4",for:"color",value:"Color"}),t("div",K,[h(t("select",{"onUpdate:modelValue":o[1]||(o[1]=e=>n(l).color=e),id:"color",name:"color",onChange:o[2]||(o[2]=e=>C.value=e.target.value),class:"rounded-lg border border-zinc-300 dark:border-zinc-700 dark:bg-zinc-900 dark:text-white"},[(a(!0),d(u,null,f(n(M),e=>(a(),d(u,null,[(a(!0),d(u,null,f(n(V)[e],g=>(a(),d("option",{style:S(`background: ${g} !important`),value:g},p(g),13,Q))),256))],64))),256))],544),[[I,n(l).color]]),t("div",{class:"w-10 h-10 ml-4",style:S(`background-color: ${C.value} !important`)},null,4)]),t("div",W,[h(t("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>n(l).menu=e),class:"w-4 h-4 text-blue-600 bg-zinc-100 border-zinc-300 rounded-sm focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-zinc-800 focus:ring-2 dark:bg-zinc-700 dark:border-zinc-600 appearance-none",type:"checkbox",name:"showInMenu",id:"showInMenu"},null,512),[[F,n(l).menu]]),s(c,{for:"showInMenu",value:"Show in menu"})])]),t("div",X,[t("form",{onSubmit:o[10]||(o[10]=O(e=>n(l).post(r.route("items.update",i.item)),["prevent"])),enctype:"multipart/form-data"},[t("input",{ref_key:"newImage",ref:$,onInput:o[4]||(o[4]=e=>n(l).image=e.target.files[0]),onChange:B,type:"file",accept:"image/*",hidden:""},null,544),s(c,{for:"categories",value:"Category"}),h(t("select",{"onUpdate:modelValue":o[5]||(o[5]=e=>n(l).category_id=e),id:"categories",class:"w-full mt-2 border-zinc-300 dark:border-zinc-700 dark:bg-zinc-900 dark:text-zinc-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm"},[t("option",{hidden:"",disabled:"",selected:i.item.category_id===69420},"Select category",8,Y),(a(!0),d(u,null,f(i.categories,e=>(a(),d("option",{value:e.id,selected:i.item.category_id===e.id},p(e.name),9,ee))),256))],512),[[I,n(l).category_id]]),s(c,{class:"mt-4",for:"name",value:"Name"}),s(b,{id:"name",type:"text",modelValue:n(l).name,"onUpdate:modelValue":o[6]||(o[6]=e=>n(l).name=e),class:"mt-2 w-full block"},null,8,["modelValue"]),t("div",te,[t("div",null,[s(c,{class:"mt-4",for:"price",value:"Price"}),s(b,{id:"price",type:"number",modelValue:n(l).price,"onUpdate:modelValue":o[7]||(o[7]=e=>n(l).price=e),class:"mt-2 w-full block"},null,8,["modelValue"])]),t("div",null,[s(c,{class:"mt-4",for:"cost",value:"Cost"}),s(b,{disabled:"",id:"cost",type:"number",modelValue:x.value,"onUpdate:modelValue":o[8]||(o[8]=e=>x.value=e),class:"mt-2 w-full block disabled:bg-zinc-700"},null,8,["modelValue"])]),t("div",null,[s(c,{class:"mt-4",for:"profit",value:"Profit"}),s(b,{disabled:"",id:"profit",type:"number",modelValue:z.value,"onUpdate:modelValue":o[9]||(o[9]=e=>z.value=e),class:"mt-2 w-full block disabled:bg-zinc-700"},null,8,["modelValue"])])]),oe,(a(!0),d(u,null,f(n(l).breakdown,(e,g)=>(a(),d("div",{key:g,class:"grid grid-cols-11 gap-2 m-2"},[s(b,{list:"costings",type:"text",modelValue:e.name,"onUpdate:modelValue":k=>e.name=k,class:"w-full block col-span-5",placeholder:"Item"},null,8,["modelValue","onUpdate:modelValue"]),s(b,{type:"number",modelValue:e.cost,"onUpdate:modelValue":k=>e.cost=k,class:"w-full block col-span-5",placeholder:"Cost"},null,8,["modelValue","onUpdate:modelValue"]),t("i",{onClick:k=>N(g),class:"bx bx-x p-2 w-8 h-8 rounded-lg text-white bg-red-500 hover:bg-red-700 duration-200 ease-in-out inline-flex justify-center items-center"},null,8,le)]))),128)),t("button",{type:"button",class:"text-xs px-4 py-1 rounded-lg bg-zinc-400 text-white",onClick:D},"Add"),ne],32)])]),t("div",se,[t("button",{onClick:o[11]||(o[11]=e=>v.value=!0),type:"button",class:"text-red-500 border border-red-500 px-4 hover:bg-red-500 hover:text-white rounded-lg text-sm"},"Delete")])]),s(P,{show:v.value,onClose:o[14]||(o[14]=e=>v.value=!1),"max-width":"md"},{default:U(()=>[t("div",ie,[ae,t("p",null,"Are you sure you want to delete "+p(i.item.name)+"?",1),t("div",de,[t("button",{onClick:o[12]||(o[12]=e=>v.value=!1),class:"dark:text-white hover:underline"},"Cancel"),t("button",{onClick:o[13]||(o[13]=e=>r.$inertia.delete(r.route("items.destroy",i.item))),class:"bg-red-500 hover:bg-red-700 active:bg-red-900 duration-200 ease-in-out px-3 py-1 text-white rounded-lg"},"Delete")])])]),_:1},8,["show"]),t("datalist",re,[(a(!0),d(u,null,f(i.suggestions,e=>(a(),d("option",{value:e},null,8,ue))),256))])],64))}};export{fe as default};
