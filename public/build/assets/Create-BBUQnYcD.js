import{r as c,o as r,f as d,a as i,w as b,u as V,b as t,F as m,h as C,g as k,Z as w,p as x,v as f,n as v}from"./app-CKtilTwd.js";import{_ as u}from"./TextInput-92ytKTaQ.js";const E=t("title",null,`
            Add Expense
        `,-1),S={class:"max-w-7xl mx-auto py-8 px-6 lg:px-8 dark:text-white"},$=t("span",{class:"font-semibold text-lg"},"Add Expense",-1),U={class:"flex flex-col space-y-2 mt-8"},D={class:"flex space-x-2"},T={class:"hidden"},N=["name","id","onUpdate:modelValue"],F=["name","id","onUpdate:modelValue"],A=["for"],O=["for"],z=["onClick"],B=t("span",null," or ",-1),j={__name:"Create",props:{errors:Object},setup(G){const o=c({expenses:[],file:""}),p=c(null),g=()=>{o.value.expenses.push({item:"",amount:"",type:"",created_at:o.value.expenses.length>0?o.value.expenses[o.value.expenses.length-1].created_at:""})},y=n=>{o.value.expenses.splice(n,1)};function _(n){const l=new Date(Math.round((n-25569)*86400*1e3));return l.getFullYear(),(l.getMonth()+1).toString().padStart(2,"0"),l.getDate().toString().padStart(2,"0"),l.toLocaleDateString("sv-SE")}const h=()=>{const n=new FormData;n.append("file",o.value.file),axios.post(route("expenses.import"),n,{headers:{"Conternt-Type":"multipart/form-data"}}).then(l=>{console.log(l.data),l.data.data.forEach(e=>{o.value.expenses.push({item:e.item,amount:e.amount,type:e.type,created_at:_(e.date)})})}).finally(()=>{o.value.file=null})};return(n,l)=>(r(),d(m,null,[i(V(w),null,{default:b(()=>[E]),_:1}),t("div",S,[$,t("div",U,[(r(!0),d(m,null,C(o.value.expenses,(e,s)=>(r(),d("div",{key:s,class:"grid grid-cols-4 gap-2 relative items-center"},[i(u,{type:"date",modelValue:e.created_at,"onUpdate:modelValue":a=>e.created_at=a},null,8,["modelValue","onUpdate:modelValue"]),i(u,{type:"text",modelValue:e.item,"onUpdate:modelValue":a=>e.item=a,placeholder:"Item"},null,8,["modelValue","onUpdate:modelValue"]),i(u,{type:"text",modelValue:e.amount,"onUpdate:modelValue":a=>e.amount=a,placeholder:"Amount"},null,8,["modelValue","onUpdate:modelValue"]),t("div",D,[t("div",T,[x(t("input",{type:"radio",name:`expense${s}.Type`,id:`net${s}.Type`,value:"Net","onUpdate:modelValue":a=>e.type=a},null,8,N),[[f,e.type]]),x(t("input",{type:"radio",name:`expense${s}.Type`,id:`cogs${s}.Type`,value:"COGS","onUpdate:modelValue":a=>e.type=a},null,8,F),[[f,e.type]])]),t("label",{for:`net${s}.Type`,class:v(["px-4 py-1 rounded-lg border inline-flex items-center text-xs ease-in-out duration-200",e.type=="Net"?"border-yellow-500 text-yellow-500":"border-zinc-700"])},"Net",10,A),t("label",{for:`cogs${s}.Type`,class:v(["px-4 py-1 rounded-lg border inline-flex items-center text-xs ease-in-out duration-200",e.type=="COGS"?"border-blue-500 text-blue-500":"border-zinc-700"])},"COGS",10,O)]),t("i",{class:"bx bx-x absolute -left-8 bg-red-500 rounded-full h-5 w-5 inline-flex items-center justify-center cursor-pointer",onClick:a=>y(s)},null,8,z)]))),128)),t("div",null,[t("span",{onClick:g,class:"text-sm rounded-lg bg-green-500 hover:bg-green-600 active:bg-green-800 px-4 w-min cursor-pointer"},"Add"),B,t("span",{onClick:l[0]||(l[0]=e=>p.value.click()),class:"text-sm underline cursor-pointer hover:text-blue-500 duration-200 ease-in-out"},"Import Excel file")])]),o.value.expenses.length?(r(),d("button",{key:0,onClick:l[1]||(l[1]=e=>n.$inertia.post(n.route("expenses.store"),{expenses:o.value.expenses})),class:"mt-8 rounded-lg bg-blue-500 text-white px-4 py-2 text-sm hover:bg-blue-600 active:bg-blue-800 duration-200 ease-in-out"},"Save")):k("",!0)]),t("input",{type:"file",id:"importExpense",ref_key:"importExpense",ref:p,onInput:l[2]||(l[2]=e=>o.value.file=e.target.files[0]),onChange:h,accept:"application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",hidden:""},null,544)],64))}};export{j as default};
