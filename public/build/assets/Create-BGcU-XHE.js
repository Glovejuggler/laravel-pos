import{T as D,m as F,k as U,r as v,o as r,f as i,a,w as A,u as n,b as l,g as j,p as I,y as L,F as u,h as b,z as S,A as O,e as P,Z as R,t as E}from"./app-B0JG0f3t.js";import{_ as c}from"./InputLabel-CgnUbMJT.js";import{_ as m}from"./TextInput-Dhu2vAGI.js";import{c as w}from"./colors-h6fGm1A9.js";const T={class:"max-w-screen-lg mx-auto py-8"},Z={class:"grid grid-cols-3 gap-4"},q={key:0,class:"bx bx-plus font-bold text-3xl dark:text-white"},G=["src"],H={class:"flex mt-2"},J=["value"],K={class:"flex mt-4 items-center space-x-2"},Q={class:"col-span-2 p-6 rounded-lg bg-white dark:bg-zinc-800 h-min"},W={class:"grid grid-cols-3 gap-1"},X=["onClick"],Y={id:"costings"},ee=["value"],se={__name:"Create",props:{suggestions:Object,duplicate:Object},setup(k){var z,C;const p=k,_=Object.keys(w).filter(s=>typeof w[s]=="object"),M=new URLSearchParams(window.location.search),o=D({category_id:M.get("category"),image:"",name:((z=p.duplicate)==null?void 0:z.name)??"",price:((C=p.duplicate)==null?void 0:C.price)??"",color:"",menu:"",breakdown:[]});F(()=>{p.duplicate&&p.duplicate.costing.length&&p.duplicate.costing.forEach(s=>{o.breakdown.push({name:s.name,cost:s.cost})})});const f=U(()=>o.breakdown.reduce((s,e)=>s+Number(e.cost),0)),x=U(()=>(o.price-f.value).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),y=v(""),V=v(null),h=v(null),$=()=>{if(o.image){let s=new FileReader;s.readAsDataURL(o.image),s.onload=e=>{h.value=e.target.result}}},B=()=>{o.breakdown.push({name:"",cost:""})},N=s=>{o.breakdown.splice(s,1)};return(s,e)=>(r(),i(u,null,[a(n(R),null,{default:A(()=>[...e[10]||(e[10]=[l("title",null,`
            Add new item
        `,-1)])]),_:1}),l("div",T,[e[13]||(e[13]=l("p",{class:"dark:text-white mb-8"},"New item",-1)),l("div",Z,[l("div",null,[l("div",{onClick:e[0]||(e[0]=t=>V.value.click()),class:"h-72 w-72 rounded-lg overflow-hidden bg-white dark:bg-zinc-700 flex justify-center items-center"},[n(o).image?j("",!0):(r(),i("i",q)),n(o).image?(r(),i("img",{key:1,src:h.value,class:"w-72 h-72 object-cover",alt:""},null,8,G)):j("",!0)]),a(c,{class:"mt-4",for:"color",value:"Color"}),l("div",H,[I(l("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>n(o).color=t),id:"color",name:"color",onChange:e[2]||(e[2]=t=>y.value=t.target.value),class:"rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-900 dark:text-white"},[(r(!0),i(u,null,b(n(_),t=>(r(),i(u,null,[(r(!0),i(u,null,b(n(w)[t],d=>(r(),i("option",{style:S(`background: ${d} !important`),value:d},E(d),13,J))),256))],64))),256))],544),[[L,n(o).color]]),l("div",{class:"w-10 h-10 ml-4",style:S(`background-color: ${y.value} !important`)},null,4)]),l("div",K,[I(l("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>n(o).menu=t),class:"w-4 h-4 text-blue-600 bg-zinc-100 border-zinc-300 rounded-sm focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-zinc-800 focus:ring-2 dark:bg-zinc-700 dark:border-zinc-600 appearance-none",type:"checkbox",name:"showInMenu",id:"showInMenu"},null,512),[[O,n(o).menu]]),a(c,{for:"showInMenu",value:"Show in menu"})])]),l("div",Q,[l("form",{onSubmit:e[9]||(e[9]=P(t=>n(o).post(s.route("items.store")),["prevent"]))},[l("input",{ref_key:"newImage",ref:V,onInput:e[4]||(e[4]=t=>n(o).image=t.target.files[0]),onChange:$,type:"file",accept:"image/*",hidden:""},null,544),a(c,{for:"name",value:"Name"}),a(m,{id:"name",type:"text",modelValue:n(o).name,"onUpdate:modelValue":e[5]||(e[5]=t=>n(o).name=t),class:"mt-2 w-full block"},null,8,["modelValue"]),l("div",W,[l("div",null,[a(c,{class:"mt-4",for:"price",value:"Price"}),a(m,{id:"price",type:"number",modelValue:n(o).price,"onUpdate:modelValue":e[6]||(e[6]=t=>n(o).price=t),class:"mt-2 w-full block"},null,8,["modelValue"])]),l("div",null,[a(c,{class:"mt-4",for:"cost",value:"Cost"}),a(m,{disabled:"",id:"cost",type:"number",modelValue:f.value,"onUpdate:modelValue":e[7]||(e[7]=t=>f.value=t),class:"mt-2 w-full block disabled:bg-zinc-700"},null,8,["modelValue"])]),l("div",null,[a(c,{class:"mt-4",for:"profit",value:"Profit"}),a(m,{disabled:"",id:"profit",type:"number",modelValue:x.value,"onUpdate:modelValue":e[8]||(e[8]=t=>x.value=t),class:"mt-2 w-full block disabled:bg-zinc-700"},null,8,["modelValue"])])]),e[11]||(e[11]=l("p",{class:"block font-medium text-sm text-zinc-700 dark:text-zinc-300 mt-4 select-none"},"Breakdown of cost",-1)),(r(!0),i(u,null,b(n(o).breakdown,(t,d)=>(r(),i("div",{key:d,class:"grid grid-cols-11 gap-2 m-2"},[a(m,{list:"costings",type:"text",modelValue:t.name,"onUpdate:modelValue":g=>t.name=g,class:"w-full block col-span-5",placeholder:"Item"},null,8,["modelValue","onUpdate:modelValue"]),a(m,{type:"number",modelValue:t.cost,"onUpdate:modelValue":g=>t.cost=g,class:"w-full block col-span-5",placeholder:"Cost"},null,8,["modelValue","onUpdate:modelValue"]),l("i",{onClick:g=>N(d),class:"bx bx-x p-2 w-8 h-8 rounded-lg text-white bg-red-500 hover:bg-red-700 duration-200 ease-in-out inline-flex justify-center items-center"},null,8,X)]))),128)),l("button",{type:"button",class:"text-xs px-4 py-1 rounded-lg bg-zinc-400 text-white",onClick:B},"Add"),e[12]||(e[12]=l("div",{class:"flex justify-end"},[l("button",{"type-":"submit",class:"rounded-lg px-4 py-2 bg-green-500 hover:bg-green-700 active:bg-green-900 text-white text-sm duration-200 ease-in-out"},"Save")],-1))],32)])])]),l("datalist",Y,[(r(!0),i(u,null,b(k.suggestions,t=>(r(),i("option",{value:t},null,8,ee))),256))])],64))}};export{se as default};
