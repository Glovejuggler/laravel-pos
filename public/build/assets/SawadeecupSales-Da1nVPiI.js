import{k as M,r as d,T as W,D as J,m as K,o as a,f as i,a as r,w as g,u,b as t,t as n,g as p,F as S,h as N,Z as Y,bW as C,B as Q}from"./app-B0JG0f3t.js";import{_ as D}from"./Modal-CDzRn7Hv.js";import{Z as X}from"./index-CbjWbaYu.js";import{_ as P}from"./InputLabel-CgnUbMJT.js";import{_ as V}from"./TextInput-Dhu2vAGI.js";import{_ as A}from"./ExpensesCard-C2qgKQBZ.js";import{_}from"./SawadeecupReceipt-QQvCeGV0.js";const ee={class:"max-w-7xl mx-auto px-6 py-8 lg:px-8 z-50"},te={class:"flex justify-between items-center mb-4"},se={key:0,class:"flex space-x-2 items-center"},le={key:1,class:"dark:text-white"},oe={key:0,class:"w-full rounded-lg dark:bg-zinc-800 bg-white dark:text-white p-4 flex flex-col relative"},ne={key:0,class:"w-full lg:w-1/4"},ae={class:"flex justify-between"},ie={class:"flex justify-between"},re={class:"flex justify-between"},de={class:"flex justify-between"},ue={class:"flex justify-between"},ce={key:1,class:"w-full lg:w-1/4"},me={class:"flex justify-between"},fe={class:"flex justify-end"},ve={class:"lg:absolute bottom-0 right-0 lg:p-4 mt-2 space-x-2 self-end"},be=["disabled"],xe=["disabled"],ge={key:1,class:"dark:text-white w-full bg-white dark:bg-zinc-800 text-left text-sm rounded-lg overflow-hidden mt-4"},pe={class:"p-4"},we={class:"bg-white dark:bg-zinc-800 border-b border-zinc-700"},he={class:"px-4 py-2"},ye={class:"px-4 py-2"},ke={class:"px-4 py-2"},Ce={class:"px-4 py-2"},De={class:"px-4 py-2"},$e={class:"px-4 py-2"},je={class:"flex space-x-2"},Fe=["onClick"],ze=["onClick"],Se={class:"bg-white font-bold dark:bg-zinc-800"},Ve={class:"px-4 py-2"},Te={class:"px-4 py-2"},Ie={class:"px-4 py-2"},Oe={key:2,class:"flex justify-center mt-14"},Ee={class:"dark:text-white p-6"},Me={class:"flex justify-center mt-4 font-bold tracking-wider text-4xl"},Ne={class:"dark:text-white p-4"},Pe={class:"mt-4 grid grid-cols-2 gap-2"},Ae={class:"dark:text-white p-4"},Be={class:"flex flex-row-reverse gap-4 mt-8"},He={class:"dark:text-white p-4"},Le={class:"flex flex-row-reverse mt-4 gap-4"},Re={key:0,class:"fixed top-0 -left-96"},Ye={__name:"SawadeecupSales",props:{transactions:Object,filters:Object,total:Object,batchDates:Object,expenses:Object},setup(o){const c=o,T=M(()=>c.expenses.net.reduce((l,e)=>l+Number(e.amount),0)),I=M(()=>c.expenses.cogs.reduce((l,e)=>l+Number(e.amount),0)),B=(l,e)=>{const s=Math.ceil(l),b=Math.floor(e);return Math.floor(Math.random()*(b-s+1)+s)},w=d(!1),O=d(null),$=d(""),j=d(null),H=l=>{O.value=l,$.value=B(1e5,999999),w.value=!0,Q(()=>j.value.focus())},L=l=>{l==$.value&&C.delete(route("order.cancel",O.value.id),{onStart:()=>j.value.disabled=!0,onSuccess:()=>w.value=!1})},m=c.filters.date?new Date(c.filters.date):new Date,R=m<new Date(new Date().setHours(0,0,0,0)),F=l=>{let e=new Date(l);return Intl.DateTimeFormat("en-PH",{month:"long",day:"numeric",year:"numeric"}).format(e)},U=W({search:c.filters.search,date:c.filters.date}),f=d({from:"",to:""}),h=d(!1);J(U,l=>{C.get(route("sales"),l,{preserveState:!0,preserveScroll:!0,replace:!0})},{deep:!0});const E=d(!1);K(()=>{let l=navigator.userAgent.toLowerCase();E.value=l.indexOf("android")>-1});const x=d(!1),y=d(null),Z=l=>{y.value=l,x.value=!0},q=()=>{const l=document.getElementById("receipt");X(l,{quality:1,scale:2}).then(e=>{console.log(e),E.value&&(window.location.href="rawbt:"+e)}).finally(()=>{x.value=!1,y.value=null})},v=d(1),k=d(!1),z=d(null),G=()=>{let l=new Date(z.value).toLocaleDateString("en-PH");console.log(l),C.get(route("sales"),{date:l})};return(l,e)=>(a(),i(S,null,[r(u(Y),null,{default:g(()=>[...e[18]||(e[18]=[t("title",null,`
            Sales
        `,-1)])]),_:1}),t("div",ee,[t("div",te,[o.filters.advanced===void 0?(a(),i("div",se,[t("i",{onClick:e[0]||(e[0]=s=>l.$inertia.get(l.route("sales"),{date:new Date(u(m).setDate(u(m).getDate()-1)).toLocaleDateString("en-PH")})),class:"bx bxs-chevron-left dark:text-white hover:bg-white hover:text-zinc-900 w-6 h-6 inline-flex justify-center items-center rounded-full border dark:border-white"}),t("p",{onClick:e[1]||(e[1]=s=>k.value=!0),class:"dark:text-white font-semibold cursor-pointer"},n(u(m).toWordFormat()),1),R?(a(),i("i",{key:0,onClick:e[2]||(e[2]=s=>l.$inertia.get(l.route("sales"),{date:new Date(u(m).setDate(u(m).getDate()+1)).toLocaleDateString("en-PH")})),class:"bx bxs-chevron-right dark:text-white hover:bg-white hover:text-zinc-900 w-6 h-6 inline-flex justify-center items-center rounded-full border dark:border-white"})):p("",!0)])):(a(),i("span",le,n(`${F(o.batchDates.from)} to ${F(o.batchDates.to)}`),1)),t("button",{onClick:e[3]||(e[3]=s=>h.value=!0),class:"text-sm dark:text-white hover:underline hover:text-blue-500 duration-200 ease-in-out"},"Advanced filter")]),o.transactions.length?(a(),i("div",oe,[v.value===1?(a(),i("div",ne,[t("div",ae,[e[19]||(e[19]=t("span",null,"Total orders:",-1)),t("b",null,n(o.transactions.length),1)]),t("div",ie,[e[20]||(e[20]=t("span",null,"Gross sales:",-1)),t("b",null,n(o.total.gross.amountFormat()),1)]),t("div",re,[e[21]||(e[21]=t("span",null,"Cost of goods sold:",-1)),t("b",null,n(o.total.cost.amountFormat()),1)]),t("div",de,[e[22]||(e[22]=t("span",null,"Income:",-1)),t("b",null,n((o.total.gross-o.total.cost).amountFormat()),1)]),r(A,{title:"Expenses",data:o.expenses.net,total:T.value},null,8,["data","total"]),t("div",ue,[e[23]||(e[23]=t("span",null,"Net Income:",-1)),t("b",null,n((o.total.gross-o.total.cost-T.value).amountFormat()),1)])])):p("",!0),v.value===2?(a(),i("div",ce,[e[25]||(e[25]=t("b",null,"Inventory Expense",-1)),t("div",me,[e[24]||(e[24]=t("span",null,"Cost of goods sold:",-1)),t("b",null,n(o.total.cost.amountFormat()),1)]),r(A,{title:"Expenses",data:o.expenses.cogs,total:I.value},null,8,["data","total"]),t("div",fe,[t("b",null,n((o.total.cost-I.value).amountFormat()),1)])])):p("",!0),t("div",ve,[t("button",{onClick:e[4]||(e[4]=s=>v.value-=1),disabled:v.value===1,class:"bx bxs-chevron-left dark:text-white enabled:hover:bg-white enabled:hover:text-zinc-900 w-6 h-6 inline-flex justify-center items-center rounded-full border dark:border-white disabled:opacity-20"},null,8,be),t("button",{onClick:e[5]||(e[5]=s=>v.value+=1),disabled:v.value===2,class:"bx bxs-chevron-right dark:text-white enabled:hover:bg-white enabled:hover:text-zinc-900 w-6 h-6 inline-flex justify-center items-center rounded-full border dark:border-white disabled:opacity-20"},null,8,xe)])])):p("",!0),o.transactions.length?(a(),i("table",ge,[t("thead",null,[t("tr",null,[e[26]||(e[26]=t("th",{class:"p-4"},"Customer",-1)),t("th",pe,n(o.batchDates?"Date":"Time"),1),e[27]||(e[27]=t("th",{class:"p-4"},"Orders",-1)),e[28]||(e[28]=t("th",{class:"p-4"},"Gross Sales",-1)),e[29]||(e[29]=t("th",{class:"p-4"},"Net Income",-1)),e[30]||(e[30]=t("th",{class:"p-4"},"Actions",-1))])]),t("tbody",null,[(a(!0),i(S,null,N(o.transactions,s=>(a(),i("tr",we,[t("td",he,n(s.name??`#${s.number}`),1),t("td",ye,n(o.batchDates?F(s.created_at):new Date(s.created_at).toTimeFormat()),1),t("td",ke,[t("div",null,[(a(!0),i(S,null,N(s.items,b=>(a(),i("p",null,n(`${b.name} x${b.quantity}`),1))),256))])]),t("td",Ce,n(s.gross.amountFormat()),1),t("td",De,n((s.gross-s.cost).amountFormat()),1),t("td",$e,[t("div",je,[t("i",{onClick:b=>Z(s),class:"bx bx-printer dark:text-white inline-flex justify-center items-center p-2 rounded-full bg-green-500 hover:bg-green-700 active:bg-green-900 duration-200 ease-in-out cursor-pointer"},null,8,Fe),t("i",{onClick:b=>H(s),class:"bx bx-trash dark:text-white inline-flex justify-center items-center p-2 rounded-full bg-red-500 hover:bg-red-700 active:bg-red-900 duration-200 ease-in-out cursor-pointer"},null,8,ze)])])]))),256)),t("tr",Se,[t("td",Ve,n(o.transactions.length),1),e[31]||(e[31]=t("td",{class:"px-4 py-2"},null,-1)),e[32]||(e[32]=t("td",{class:"px-4 py-2"},null,-1)),t("td",Te,n(o.total.gross.amountFormat()),1),t("td",Ie,n((o.total.gross-o.total.cost).amountFormat()),1),e[33]||(e[33]=t("td",{class:"px-4 py-2"},null,-1))])])])):(a(),i("div",Oe,[...e[34]||(e[34]=[t("div",{class:"flex justify-center items-center flex-col text-zinc-700 dark:text-zinc-400"},[t("i",{class:"bx bx-ghost text-7xl"}),t("p",null,"Oohh... It's empty in here.")],-1)])]))]),r(D,{show:w.value,"max-width":"md",onClose:e[7]||(e[7]=s=>w.value=!1)},{default:g(()=>[t("div",Ee,[e[35]||(e[35]=t("p",{class:"font-bold"},"Confirmation",-1)),e[36]||(e[36]=t("p",{class:"mt-4"},"This transaction record will be deleted. Enter the code to continue.",-1)),t("div",Me,n($.value),1),t("input",{ref_key:"codeInput",ref:j,onKeyup:e[6]||(e[6]=s=>L(s.target.value)),class:"bg-zinc-900 w-full rounded-lg mt-2 disabled:opacity-50",type:"text"},null,544)])]),_:1},8,["show"]),r(D,{show:x.value,onClose:e[9]||(e[9]=s=>x.value=!1)},{default:g(()=>[t("div",Ne,[e[37]||(e[37]=t("p",{class:"font-bold"},"Confirmation",-1)),e[38]||(e[38]=t("p",{class:"mt-4"},"Print this receipt?",-1)),t("div",Pe,[t("button",{onClick:q,class:"bg-green-500 rounded-lg py-2 hover:bg-green-600 active:bg-green-800 duration-200 ease-in-out"},"Yes"),t("button",{onClick:e[8]||(e[8]=s=>x.value=!1),class:"bg-zinc-500 rounded-lg py-2 hover:bg-zinc-600 active:bg-zinc-900 duration-200 ease-in-out"},"Cancel")])])]),_:1},8,["show"]),r(D,{show:h.value,onClose:e[14]||(e[14]=s=>h.value=!1),"max-width":"md",closeable:!1},{default:g(()=>[t("div",Ae,[r(P,{for:"from",value:"From"}),r(V,{type:"date",id:"from",modelValue:f.value.from,"onUpdate:modelValue":e[10]||(e[10]=s=>f.value.from=s),class:"w-full mt-2"},null,8,["modelValue"]),r(P,{class:"mt-4",for:"to",value:"To"}),r(V,{type:"date",id:"to",modelValue:f.value.to,"onUpdate:modelValue":e[11]||(e[11]=s=>f.value.to=s),class:"w-full mt-2"},null,8,["modelValue"]),t("div",Be,[t("button",{onClick:e[12]||(e[12]=s=>u(C).get(l.route("sales"),{advanced:{from:f.value.from,to:f.value.to}})),class:"text-white rounded-lg bg-green-500 hover:bg-green-600 active:bg-green-800 duration-200 ease-in-out px-6 py-2 text-sm"},"Submit"),t("button",{onClick:e[13]||(e[13]=s=>h.value=!1),class:"dark:text-white hover:underline text-sm"},"Cancel")])])]),_:1},8,["show"]),r(D,{show:k.value,onClose:e[17]||(e[17]=s=>k.value=!1),"max-width":"md",closeable:!1},{default:g(()=>[t("div",He,[r(V,{type:"date",id:"jump",modelValue:z.value,"onUpdate:modelValue":e[15]||(e[15]=s=>z.value=s),class:"w-full"},null,8,["modelValue"]),t("div",Le,[t("button",{onClick:G,class:"text-white rounded-lg bg-green-500 hover:bg-green-600 active:bg-green-800 duration-200 ease-in-out px-6 py-2 text-sm"},"Jump"),t("button",{onClick:e[16]||(e[16]=s=>k.value=!1),class:"dark:text-white hover:underline text-sm"},"Cancel")])])]),_:1},8,["show"]),y.value?(a(),i("div",Re,[r(_,{receipt:y.value,id:"receipt"},null,8,["receipt"])])):p("",!0)],64))}};export{Ye as default};
